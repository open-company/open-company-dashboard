{
"version":3,
"file":"module$node_modules$$sentry$browser$dist$transports$xhr.js",
"lineCount":4,
"mappings":"AAAAA,cAAA,CAAe,uDAAf,CAA4E,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CACpHC,MAAA,CAAOC,cAAP,CAAsBF,OAAtB,CAA+B,YAA/B,CAA6C,CAAEG,MAAO,CAAA,CAAT,CAA7C,CACA,KAAIC,QAAUN,OAAA,CAAQ,iCAAR,CAAd,CACIO,OAASP,OAAA,CAAQ,6CAAR,CADb,CAEIQ,QAAUR,OAAA,CAAQ,8CAAR,CAFd,CAGIS,QAAUT,OAAA,CAAQ,8CAAR,CAGVU,OAAAA,CAA8B,QAAS,CAACC,MAAD,CAAS,CAEhDD,QAASA,aAAY,EAAG,CACpB,IAAIE,MAAmB,IAAnBA,GAAQD,MAARC,EAA2BD,MAAA,CAAOE,KAAP,CAAa,IAAb;AAAmBC,SAAnB,CAA3BF,EAA4D,IAEhEA,MAAA,CAAMG,cAAN,CAAuB,IAAIC,IAAJ,CAASA,IAAA,CAAKC,GAAL,EAAT,CACvB,OAAOL,MAJa,CADxBN,OAAA,CAAQY,SAAR,CAAkBR,YAAlB,CAAgCC,MAAhC,CAUAD,aAAA,CAAaS,SAAb,CAAuBC,SAAvB,CAAmCC,QAAS,CAACC,KAAD,CAAQ,CAChD,IAAIV,MAAQ,IACZ,IAAI,IAAII,IAAJ,CAASA,IAAA,CAAKC,GAAL,EAAT,CAAJ,CAA2B,IAA3B,CAAgCF,cAAhC,CACI,MAAOQ,QAAA,CAAQC,MAAR,CAAe,CAClBF,MAAOA,KADW,CAElBG,OAAQ,wBAARA,CAAmC,IAAnCA,CAAwCV,cAAxCU,CAAyD,4BAFvC,CAGlBC,OAAQ,GAHU,CAAf,CAMX,KAAIC,UAAYpB,MAAA,CAAOqB,oBAAP,CAA4BN,KAA5B,CAAmC,IAAnC,CAAwCO,IAAxC,CAChB,OAAO,KAAA,CAAKC,OAAL,CAAaC,GAAb,CAAiB,IAAItB,OAAJ,CAAYuB,WAAZ,CAAwB,QAAS,CAACC,OAAD,CAAUT,MAAV,CAAkB,CACvE,IAAIU,QAAU,IAAIC,cAClBD;OAAA,CAAQE,kBAAR,CAA6BC,QAAS,EAAG,CACrC,GAA2B,CAA3B,GAAIH,OAAJ,CAAYI,UAAZ,CAAA,CAGA,IAAIZ,OAASlB,OAAA,CAAQ+B,MAAR,CAAeC,YAAf,CAA4BN,OAA5B,CAAoCR,MAApC,CACb,IAAIA,MAAJ,GAAelB,OAAf,CAAuB+B,MAAvB,CAA8BE,OAA9B,CACIR,OAAA,CAAQ,CAAEP,OAAQA,MAAV,CAAR,CADJ,KAAA,CAIA,GAAIA,MAAJ,GAAelB,OAAf,CAAuB+B,MAAvB,CAA8BG,SAA9B,CAAyC,CACjCzB,MAAAA,CAAMD,IAAA,CAAKC,GAAL,EAKV,KAAI0B,iBAAmBT,OAAA,CAAQU,iBAAR,CAA0B,aAA1B,CACvBhC,MAAA,CAAMG,cAAN,CAAuB,IAAIC,IAAJ,CAASC,MAAT,CAAeR,OAAA,CAAQoC,qBAAR,CAA8B5B,MAA9B,CAAmC0B,gBAAnC,CAAf,CACvBlC,QAAA,CAAQqC,MAAR,CAAeC,IAAf,CAAoB,uCAApB,CAA8DnC,KAA9D,CAAoEG,cAApE,CARqC,CAUzCS,MAAA,CAAOU,OAAP,CAdA,CAJA,CADqC,CAqBzCA,QAAA,CAAQc,IAAR,CAAa,MAAb;AAAqBrB,SAArB,CAA+BsB,GAA/B,CACA,KAAKC,IAAIA,MAAT,GAAmBtC,MAAnB,CAAyBuC,OAAzB,CAAiCC,OAAjC,CACQxC,KAAA,CAAMuC,OAAN,CAAcC,OAAd,CAAsBC,cAAtB,CAAqCH,MAArC,CAAJ,EACIhB,OAAA,CAAQoB,gBAAR,CAAyBJ,MAAzB,CAAiCtC,KAAA,CAAMuC,OAAN,CAAcC,OAAd,CAAsBF,MAAtB,CAAjC,CAGRhB,QAAA,CAAQqB,IAAR,CAAa5B,SAAb,CAAuB6B,IAAvB,CA7BuE,CAAnD,CAAjB,CAVyC,CA0CpD,OAAO9C,aArDyC,CAAlB,CAFrBV,OAAAyD,CAAQ,0DAARA,CAEqB,CAsDzBC,aAtDyB,CAuDlCxD,QAAA,CAAQQ,YAAR,CAAuBA,MA/D6F;",
"sources":["node_modules/@sentry/browser/dist/transports/xhr.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$sentry$browser$dist$transports$xhr\"] = function(global,require,module,exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar core_1 = require(\"@sentry/core\");\nvar types_1 = require(\"@sentry/types\");\nvar utils_1 = require(\"@sentry/utils\");\nvar base_1 = require(\"./base\");\n/** `XHR` based transport */\nvar XHRTransport = /** @class */ (function (_super) {\n    tslib_1.__extends(XHRTransport, _super);\n    function XHRTransport() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /** Locks transport after receiving 429 response */\n        _this._disabledUntil = new Date(Date.now());\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    XHRTransport.prototype.sendEvent = function (event) {\n        var _this = this;\n        if (new Date(Date.now()) < this._disabledUntil) {\n            return Promise.reject({\n                event: event,\n                reason: \"Transport locked till \" + this._disabledUntil + \" due to too many requests.\",\n                status: 429,\n            });\n        }\n        var sentryReq = core_1.eventToSentryRequest(event, this._api);\n        return this._buffer.add(new utils_1.SyncPromise(function (resolve, reject) {\n            var request = new XMLHttpRequest();\n            request.onreadystatechange = function () {\n                if (request.readyState !== 4) {\n                    return;\n                }\n                var status = types_1.Status.fromHttpCode(request.status);\n                if (status === types_1.Status.Success) {\n                    resolve({ status: status });\n                    return;\n                }\n                if (status === types_1.Status.RateLimit) {\n                    var now = Date.now();\n                    /**\n                     * \"The search for the header name is case-insensitive.\"\n                     * https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getResponseHeader\n                     */\n                    var retryAfterHeader = request.getResponseHeader('Retry-After');\n                    _this._disabledUntil = new Date(now + utils_1.parseRetryAfterHeader(now, retryAfterHeader));\n                    utils_1.logger.warn(\"Too many requests, backing off till: \" + _this._disabledUntil);\n                }\n                reject(request);\n            };\n            request.open('POST', sentryReq.url);\n            for (var header in _this.options.headers) {\n                if (_this.options.headers.hasOwnProperty(header)) {\n                    request.setRequestHeader(header, _this.options.headers[header]);\n                }\n            }\n            request.send(sentryReq.body);\n        }));\n    };\n    return XHRTransport;\n}(base_1.BaseTransport));\nexports.XHRTransport = XHRTransport;\n//# sourceMappingURL=xhr.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","tslib_1","core_1","types_1","utils_1","XHRTransport","_super","_this","apply","arguments","_disabledUntil","Date","now","__extends","prototype","sendEvent","XHRTransport.prototype.sendEvent","event","Promise","reject","reason","status","sentryReq","eventToSentryRequest","_api","_buffer","add","SyncPromise","resolve","request","XMLHttpRequest","onreadystatechange","request.onreadystatechange","readyState","Status","fromHttpCode","Success","RateLimit","retryAfterHeader","getResponseHeader","parseRetryAfterHeader","logger","warn","open","url","header","options","headers","hasOwnProperty","setRequestHeader","send","body","base_1","BaseTransport"]
}
