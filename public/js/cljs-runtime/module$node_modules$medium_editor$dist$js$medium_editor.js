shadow$provide.module$node_modules$medium_editor$dist$js$medium_editor=function(global,require,module,exports){var process=require("module$node_modules$process$browser");"classList"in document.createElement("_")||function(view){if("Element"in view){view=view.Element.prototype;var objCtr=Object,strTrim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},arrIndexOf=Array.prototype.indexOf||function(item){for(var i=0,len=this.length;i<len;i++)if(i in this&&this[i]===item)return i;
return-1},DOMEx=function(type,message){this.name=type;this.code=DOMException[type];this.message=message},checkTokenAndGetIndex=function(classList,token){if(""===token)throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(token))throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character");return arrIndexOf.call(classList,token)},ClassList=function(elem){var trimmedClasses=strTrim.call(elem.getAttribute("class")||"");trimmedClasses=trimmedClasses?
trimmedClasses.split(/\s+/):[];for(var i=0,len=trimmedClasses.length;i<len;i++)this.push(trimmedClasses[i]);this._updateClassName=function(){elem.setAttribute("class",this.toString())}},classListProto=ClassList.prototype=[],classListGetter=function(){return new ClassList(this)};DOMEx.prototype=Error.prototype;classListProto.item=function(i){return this[i]||null};classListProto.contains=function(token){return-1!==checkTokenAndGetIndex(this,token+"")};classListProto.add=function(){var tokens=arguments,
i=0,l=tokens.length,updated=!1;do{var token=tokens[i]+"";-1===checkTokenAndGetIndex(this,token)&&(this.push(token),updated=!0)}while(++i<l);updated&&this._updateClassName()};classListProto.remove=function(){var tokens=arguments,i=0,l=tokens.length,updated=!1,index;do{var token=tokens[i]+"";for(index=checkTokenAndGetIndex(this,token);-1!==index;)this.splice(index,1),updated=!0,index=checkTokenAndGetIndex(this,token)}while(++i<l);updated&&this._updateClassName()};classListProto.toggle=function(token,
force){token+="";var result=this.contains(token),method=result?!0!==force&&"remove":!1!==force&&"add";if(method)this[method](token);return!0===force||!1===force?force:!result};classListProto.toString=function(){return this.join(" ")};if(objCtr.defineProperty){classListProto={get:classListGetter,enumerable:!0,configurable:!0};try{objCtr.defineProperty(view,"classList",classListProto)}catch(ex){-2146823252===ex.number&&(classListProto.enumerable=!1,objCtr.defineProperty(view,"classList",classListProto))}}else objCtr.prototype.__defineGetter__&&
view.__defineGetter__("classList",classListGetter)}}(self);(function(view$jscomp$0){view$jscomp$0.URL=view$jscomp$0.URL||view$jscomp$0.webkitURL;if(view$jscomp$0.Blob&&view$jscomp$0.URL)try{new Blob;return}catch(e){}var BlobBuilder=view$jscomp$0.BlobBuilder||view$jscomp$0.WebKitBlobBuilder||view$jscomp$0.MozBlobBuilder||function(view){var get_class=function(object){return Object.prototype.toString.call(object).match(/^\[object\s(.*)\]$/)[1]},FakeBlobBuilder=function(){this.data=[]},FakeBlob=function(data,
type,encoding){this.data=data;this.size=data.length;this.type=type;this.encoding=encoding},FBB_proto=FakeBlobBuilder.prototype,FB_proto=FakeBlob.prototype,FileReaderSync=view.FileReaderSync,FileException=function(type){this.code=this[this.name=type]},file_ex_codes="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),file_ex_code=file_ex_codes.length,real_URL=view.URL||view.webkitURL||view,real_create_object_URL=real_URL.createObjectURL,
real_revoke_object_URL=real_URL.revokeObjectURL,URL=real_URL,btoa=view.btoa,atob=view.atob,ArrayBuffer=view.ArrayBuffer,Uint8Array=view.Uint8Array,origin=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(FakeBlob.fake=FB_proto.fake=!0;file_ex_code--;)FileException.prototype[file_ex_codes[file_ex_code]]=file_ex_code+1;real_URL.createObjectURL||(URL=view.URL=function(uri){var uri_info=document.createElementNS("http://www.w3.org/1999/xhtml","a");uri_info.href=uri;"origin"in uri_info||("data:"===uri_info.protocol.toLowerCase()?
uri_info.origin=null:(uri=uri.match(origin),uri_info.origin=uri&&uri[1]));return uri_info});URL.createObjectURL=function(blob){var type=blob.type;null===type&&(type="application/octet-stream");if(blob instanceof FakeBlob)return type="data:"+type,"base64"===blob.encoding?type+";base64,"+blob.data:"URI"===blob.encoding?type+","+decodeURIComponent(blob.data):btoa?type+";base64,"+btoa(blob.data):type+","+encodeURIComponent(blob.data);if(real_create_object_URL)return real_create_object_URL.call(real_URL,
blob)};URL.revokeObjectURL=function(object_URL){"data:"!==object_URL.substring(0,5)&&real_revoke_object_URL&&real_revoke_object_URL.call(real_URL,object_URL)};FBB_proto.append=function(data){var bb=this.data;if(Uint8Array&&(data instanceof ArrayBuffer||data instanceof Uint8Array)){var str="";data=new Uint8Array(data);for(var i=0,buf_len=data.length;i<buf_len;i++)str+=String.fromCharCode(data[i]);bb.push(str)}else if("Blob"===get_class(data)||"File"===get_class(data))if(FileReaderSync)str=new FileReaderSync,
bb.push(str.readAsBinaryString(data));else throw new FileException("NOT_READABLE_ERR");else data instanceof FakeBlob?"base64"===data.encoding&&atob?bb.push(atob(data.data)):"URI"===data.encoding?bb.push(decodeURIComponent(data.data)):"raw"===data.encoding&&bb.push(data.data):("string"!==typeof data&&(data+=""),bb.push(unescape(encodeURIComponent(data))))};FBB_proto.getBlob=function(type){arguments.length||(type=null);return new FakeBlob(this.data.join(""),type,"raw")};FBB_proto.toString=function(){return"[object BlobBuilder]"};
FB_proto.slice=function(start,end,type){var args=arguments.length;3>args&&(type=null);return new FakeBlob(this.data.slice(start,1<args?end:this.data.length),type,this.encoding)};FB_proto.toString=function(){return"[object Blob]"};FB_proto.close=function(){this.size=0;delete this.data};return FakeBlobBuilder}(view$jscomp$0);view$jscomp$0.Blob=function(blobParts,options){options=options?options.type||"":"";var builder=new BlobBuilder;if(blobParts)for(var i=0,len=blobParts.length;i<len;i++)Uint8Array&&
blobParts[i]instanceof Uint8Array?builder.append(blobParts[i].buffer):builder.append(blobParts[i]);blobParts=builder.getBlob(options);!blobParts.slice&&blobParts.webkitSlice&&(blobParts.slice=blobParts.webkitSlice);return blobParts};view$jscomp$0.Blob.prototype=(Object.getPrototypeOf||function(object){return object.__proto__})(new view$jscomp$0.Blob)})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content||this);(function(root,factory){"object"===typeof module&&"undefined"!==
typeof process&&process&&process.versions&&process.versions.electron||"object"!==typeof module?"function"===typeof define&&define.amd?define(function(){return factory}):root.MediumEditor=factory:module.exports=factory})(this,function(){function MediumEditor(elements,options){return this.init(elements,options)}MediumEditor.extensions={};(function(window){function copyInto(overwrite,dest){var prop,sources=Array.prototype.slice.call(arguments,2);dest=dest||{};for(var i=0;i<sources.length;i++){var source=
sources[i];if(source)for(prop in source)source.hasOwnProperty(prop)&&"undefined"!==typeof source[prop]&&(overwrite||!1===dest.hasOwnProperty(prop))&&(dest[prop]=source[prop])}return dest}var nodeContainsWorksWithTextNodes=!1;try{var testParent=document.createElement("div"),testText=document.createTextNode(" ");testParent.appendChild(testText);nodeContainsWorksWithTextNodes=testParent.contains(testText)}catch(exc){}var Util={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&
null!==/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent),isEdge:null!==/Edge\/\d+/.exec(navigator.userAgent),isFF:-1<navigator.userAgent.toLowerCase().indexOf("firefox"),isMac:0<=window.navigator.platform.toUpperCase().indexOf("MAC"),keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(event){return Util.isMac&&event.metaKey||!Util.isMac&&event.ctrlKey?!0:!1},isKey:function(event,keys){event=Util.getKeyCode(event);return!1===Array.isArray(keys)?
event===keys:-1===keys.indexOf(event)?!1:!0},getKeyCode:function(event){var keyCode=event.which;null===keyCode&&(keyCode=null!==event.charCode?event.charCode:event.keyCode);return keyCode},blockContainerElementNames:"p h1 h2 h3 h4 h5 h6 blockquote pre ul li ol address article aside audio canvas dd dl dt fieldset figcaption figure footer form header hgroup main nav noscript output section video table thead tbody tfoot tr th td".split(" "),emptyElementNames:"br col colgroup hr img input source wbr".split(" "),
extend:function(){var args=[!0].concat(Array.prototype.slice.call(arguments));return copyInto.apply(this,args)},defaults:function(){var args=[!1].concat(Array.prototype.slice.call(arguments));return copyInto.apply(this,args)},createLink:function(document,textNodes,href,target){document=document.createElement("a");Util.moveTextRangeIntoElement(textNodes[0],textNodes[textNodes.length-1],document);document.setAttribute("href",href);target&&("_blank"===target&&document.setAttribute("rel","noopener noreferrer"),
document.setAttribute("target",target));return document},findOrCreateMatchingTextNodes:function(document,element,match){document=document.createTreeWalker(element,NodeFilter.SHOW_ALL,null,!1);element=[];for(var currentTextIndex=0,startReached=!1,currentNode,newNode=null;null!==(currentNode=document.nextNode());)if(!(3<currentNode.nodeType))if(3===currentNode.nodeType){!startReached&&match.start<currentTextIndex+currentNode.nodeValue.length&&(startReached=!0,newNode=Util.splitStartNodeIfNeeded(currentNode,
match.start,currentTextIndex));startReached&&Util.splitEndNodeIfNeeded(currentNode,newNode,match.end,currentTextIndex);if(startReached&&currentTextIndex===match.end)break;else if(startReached&&currentTextIndex>match.end+1)throw Error("PerformLinking overshot the target!");startReached&&element.push(newNode||currentNode);currentTextIndex+=currentNode.nodeValue.length;null!==newNode&&(currentTextIndex+=newNode.nodeValue.length,document.nextNode());newNode=null}else"img"===currentNode.tagName.toLowerCase()&&
(!startReached&&match.start<=currentTextIndex&&(startReached=!0),startReached&&element.push(currentNode));return element},splitStartNodeIfNeeded:function(currentNode,matchStartIndex,currentTextIndex){return matchStartIndex!==currentTextIndex?currentNode.splitText(matchStartIndex-currentTextIndex):null},splitEndNodeIfNeeded:function(currentNode,newNode,matchEndIndex,currentTextIndex){var textIndexOfEndOfFarthestNode=currentTextIndex+currentNode.nodeValue.length+(newNode?newNode.nodeValue.length:0)-
1;var endSplitPoint=matchEndIndex-currentTextIndex-(newNode?currentNode.nodeValue.length:0);textIndexOfEndOfFarthestNode>=matchEndIndex&&currentTextIndex!==textIndexOfEndOfFarthestNode&&0!==endSplitPoint&&(newNode||currentNode).splitText(endSplitPoint)},splitByBlockElements:function(element){if(3!==element.nodeType&&1!==element.nodeType)return[];var toRet=[],blockElementQuery=MediumEditor.util.blockContainerElementNames.join(",");if(3===element.nodeType||0===element.querySelectorAll(blockElementQuery).length)return[element];
for(var i=0;i<element.childNodes.length;i++){var child=element.childNodes[i];3===child.nodeType?toRet.push(child):1===child.nodeType&&(0===child.querySelectorAll(blockElementQuery).length?toRet.push(child):toRet=toRet.concat(MediumEditor.util.splitByBlockElements(child)))}return toRet},findAdjacentTextNodeWithContent:function(rootNode,targetNode,ownerDocument){var pastTarget=!1;ownerDocument=ownerDocument.createNodeIterator(rootNode,NodeFilter.SHOW_TEXT,null,!1);for(rootNode=ownerDocument.nextNode();rootNode;){if(rootNode===
targetNode)pastTarget=!0;else if(pastTarget&&3===rootNode.nodeType&&rootNode.nodeValue&&0<rootNode.nodeValue.trim().length)break;rootNode=ownerDocument.nextNode()}return rootNode},findPreviousSibling:function(node){if(!node||Util.isMediumEditorElement(node))return!1;for(var previousSibling=node.previousSibling;!previousSibling&&!Util.isMediumEditorElement(node.parentNode);)node=node.parentNode,previousSibling=node.previousSibling;return previousSibling},isDescendant:function(parent,child,checkEquality){if(!parent||
!child)return!1;if(parent===child)return!!checkEquality;if(1!==parent.nodeType)return!1;if(nodeContainsWorksWithTextNodes||3!==child.nodeType)return parent.contains(child);for(child=child.parentNode;null!==child;){if(child===parent)return!0;child=child.parentNode}return!1},isElement:function(obj){return!(!obj||1!==obj.nodeType)},throttle:function(func,wait){var context,args,result,timeout=null,previous=0,later=function(){previous=Date.now();timeout=null;result=func.apply(context,args);timeout||(context=
args=null)};wait||0===wait||(wait=50);return function(){var now=Date.now(),remaining=wait-(now-previous);context=this;args=arguments;0>=remaining||remaining>wait?(timeout&&(clearTimeout(timeout),timeout=null),previous=now,result=func.apply(context,args),timeout||(context=args=null)):timeout||(timeout=setTimeout(later,remaining));return result}},traverseUp:function(current,testElementFunction){if(!current)return!1;do{if(1===current.nodeType){if(testElementFunction(current))return current;if(Util.isMediumEditorElement(current))break}current=
current.parentNode}while(current);return!1},htmlEntities:function(str){return String(str).replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;")},insertHTMLCommand:function(doc,html){var el=!1;var ecArgs=["insertHTML",!1,html];if(!MediumEditor.util.isEdge&&doc.queryCommandSupported("insertHTML"))try{return doc.execCommand.apply(doc,ecArgs)}catch(ignore){}var selection=doc.getSelection();if(selection.rangeCount){selection=selection.getRangeAt(0);el=selection.commonAncestorContainer;
if(Util.isMediumEditorElement(el)&&!el.firstChild)selection.selectNode(el.appendChild(doc.createTextNode("")));else if(3===el.nodeType&&0===selection.startOffset&&selection.endOffset===el.nodeValue.length||3!==el.nodeType&&el.innerHTML===selection.toString()){for(;!Util.isMediumEditorElement(el)&&el.parentNode&&1===el.parentNode.childNodes.length&&!Util.isMediumEditorElement(el.parentNode);)el=el.parentNode;selection.selectNode(el)}selection.deleteContents();el=doc.createElement("div");el.innerHTML=
html;for(html=doc.createDocumentFragment();el.firstChild;){var node=el.firstChild;node=html.appendChild(node)}selection.insertNode(html);node&&(selection=selection.cloneRange(),selection.setStartAfter(node),selection.collapse(!0),MediumEditor.selection.selectRange(doc,selection));el=!0}doc.execCommand.callListeners&&doc.execCommand.callListeners(ecArgs,el);return el},execFormatBlock:function(doc,tagName){var blockContainer=Util.getTopBlockContainer(MediumEditor.selection.getSelectionStart(doc));if("blockquote"===
tagName){if(blockContainer){var childNodes=Array.prototype.slice.call(blockContainer.childNodes);if(childNodes.some(function(childNode){return Util.isBlockContainer(childNode)}))return doc.execCommand("outdent",!1,null)}if(Util.isIE)return doc.execCommand("indent",!1,tagName)}blockContainer&&tagName===blockContainer.nodeName.toLowerCase()&&(tagName="p");Util.isIE&&(tagName="\x3c"+tagName+"\x3e");if(blockContainer&&"blockquote"===blockContainer.nodeName.toLowerCase()){if(Util.isIE&&"\x3cp\x3e"===tagName)return doc.execCommand("outdent",
!1,tagName);if((Util.isFF||Util.isEdge)&&"p"===tagName)return childNodes=Array.prototype.slice.call(blockContainer.childNodes),childNodes.some(function(childNode){return!Util.isBlockContainer(childNode)})&&doc.execCommand("formatBlock",!1,tagName),doc.execCommand("outdent",!1,tagName)}return doc.execCommand("formatBlock",!1,tagName)},setTargetBlank:function(el,anchorUrl){var url=anchorUrl||!1;if("a"===el.nodeName.toLowerCase())el.target="_blank",el.rel="noopener noreferrer";else for(el=el.getElementsByTagName("a"),
anchorUrl=0;anchorUrl<el.length;anchorUrl+=1)if(!1===url||url===el[anchorUrl].attributes.href.value)el[anchorUrl].target="_blank",el[anchorUrl].rel="noopener noreferrer"},removeTargetBlank:function(el,anchorUrl){var i;if("a"===el.nodeName.toLowerCase())el.removeAttribute("target"),el.removeAttribute("rel");else for(el=el.getElementsByTagName("a"),i=0;i<el.length;i+=1)anchorUrl===el[i].attributes.href.value&&(el[i].removeAttribute("target"),el[i].removeAttribute("rel"))},addClassToAnchors:function(el,
buttonClass){buttonClass=buttonClass.split(" ");var j;if("a"===el.nodeName.toLowerCase())for(j=0;j<buttonClass.length;j+=1)el.classList.add(buttonClass[j]);else{var i=el.getElementsByTagName("a");el=0===i.length?(el=Util.getClosestTag(el,"a"))?[el]:[]:i;for(i=0;i<el.length;i+=1)for(j=0;j<buttonClass.length;j+=1)el[i].classList.add(buttonClass[j])}},isListItem:function(node){if(!node)return!1;if("li"===node.nodeName.toLowerCase())return!0;node=node.parentNode;for(var tagName=node.nodeName.toLowerCase();"li"===
tagName||!Util.isBlockContainer(node)&&"div"!==tagName;){if("li"===tagName)return!0;if(node=node.parentNode)tagName=node.nodeName.toLowerCase();else break}return!1},cleanListDOM:function(ownerDocument,element){if("li"===element.nodeName.toLowerCase()){var list=element.parentElement;"p"===list.parentElement.nodeName.toLowerCase()&&(Util.unwrap(list.parentElement,ownerDocument),MediumEditor.selection.moveCursor(ownerDocument,element.firstChild,element.firstChild.textContent.length))}},splitOffDOMTree:function(rootNode,
leafNode,splitLeft){var createdNode=null;for(splitLeft=!splitLeft;leafNode!==rootNode;){var currParent=leafNode.parentNode,newParent=currParent.cloneNode(!1),targetNode=splitLeft?leafNode:currParent.firstChild,appendLast;createdNode&&(splitLeft?newParent.appendChild(createdNode):appendLast=createdNode);for(createdNode=newParent;targetNode;)newParent=targetNode.nextSibling,targetNode===leafNode?(targetNode.hasChildNodes()?targetNode=targetNode.cloneNode(!1):targetNode.parentNode.removeChild(targetNode),
targetNode.textContent&&createdNode.appendChild(targetNode),targetNode=splitLeft?newParent:null):(targetNode.parentNode.removeChild(targetNode),(targetNode.hasChildNodes()||targetNode.textContent)&&createdNode.appendChild(targetNode),targetNode=newParent);appendLast&&createdNode.appendChild(appendLast);leafNode=currParent}return createdNode},moveTextRangeIntoElement:function(startNode,endNode,newElement){if(!startNode||!endNode)return!1;var rootNode=Util.findCommonRoot(startNode,endNode);if(!rootNode)return!1;
if(endNode===startNode)return endNode=startNode.parentNode,rootNode=startNode.nextSibling,endNode.removeChild(startNode),newElement.appendChild(startNode),rootNode?endNode.insertBefore(newElement,rootNode):endNode.appendChild(newElement),newElement.hasChildNodes();for(var rootChildren=[],firstChild,lastChild,nextNode,i=0;i<rootNode.childNodes.length;i++)if(nextNode=rootNode.childNodes[i],firstChild)if(Util.isDescendant(nextNode,endNode,!0)){lastChild=nextNode;break}else rootChildren.push(nextNode);
else Util.isDescendant(nextNode,startNode,!0)&&(firstChild=nextNode);nextNode=lastChild.nextSibling;var fragment=rootNode.ownerDocument.createDocumentFragment();firstChild===startNode?(firstChild.parentNode.removeChild(firstChild),fragment.appendChild(firstChild)):fragment.appendChild(Util.splitOffDOMTree(firstChild,startNode));rootChildren.forEach(function(element){element.parentNode.removeChild(element);fragment.appendChild(element)});lastChild===endNode?(lastChild.parentNode.removeChild(lastChild),
fragment.appendChild(lastChild)):fragment.appendChild(Util.splitOffDOMTree(lastChild,endNode,!0));newElement.appendChild(fragment);lastChild.parentNode===rootNode?rootNode.insertBefore(newElement,lastChild):nextNode?rootNode.insertBefore(newElement,nextNode):rootNode.appendChild(newElement);return newElement.hasChildNodes()},depthOfNode:function(inNode){for(var theDepth=0;null!==inNode.parentNode;)inNode=inNode.parentNode,theDepth++;return theDepth},findCommonRoot:function(inNode1,inNode2){for(var depth1=
Util.depthOfNode(inNode1),depth2=Util.depthOfNode(inNode2);depth1!==depth2;)depth1>depth2?(inNode1=inNode1.parentNode,--depth1):(inNode2=inNode2.parentNode,--depth2);for(;inNode1!==inNode2;)inNode1=inNode1.parentNode,inNode2=inNode2.parentNode;return inNode1},isElementAtBeginningOfBlock:function(node){for(var textVal,sibling;!Util.isBlockContainer(node)&&!Util.isMediumEditorElement(node);){for(sibling=node;sibling=sibling.previousSibling;)if(textVal=3===sibling.nodeType?sibling.nodeValue:sibling.textContent,
0<textVal.length)return!1;node=node.parentNode}return!0},isMediumEditorElement:function(element){return element&&element.getAttribute&&!!element.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(element){return Util.traverseUp(element,function(node){return Util.isMediumEditorElement(node)})},isBlockContainer:function(element){return element&&3!==element.nodeType&&-1!==Util.blockContainerElementNames.indexOf(element.nodeName.toLowerCase())},getClosestBlockContainer:function(node$jscomp$0){return Util.traverseUp(node$jscomp$0,
function(node){return Util.isBlockContainer(node)||Util.isMediumEditorElement(node)})},getTopBlockContainer:function(element){var topBlock=Util.isBlockContainer(element)?element:!1;Util.traverseUp(element,function(el){Util.isBlockContainer(el)&&(topBlock=el);return!topBlock&&Util.isMediumEditorElement(el)?(topBlock=el,!0):!1});return topBlock},getFirstSelectableLeafNode:function(element){for(;element&&element.firstChild;)element=element.firstChild;element=Util.traverseUp(element,function(el){return-1===
Util.emptyElementNames.indexOf(el.nodeName.toLowerCase())});if("table"===element.nodeName.toLowerCase()){var firstCell=element.querySelector("th, td");firstCell&&(element=firstCell)}return element},getFirstTextNode:function(element){Util.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0");return Util._getFirstTextNode(element)},_getFirstTextNode:function(element){if(3===element.nodeType)return element;for(var i=0;i<element.childNodes.length;i++){var textNode=Util._getFirstTextNode(element.childNodes[i]);
if(null!==textNode)return textNode}return null},ensureUrlHasProtocol:function(url){return-1===url.indexOf("://")?"http://"+url:url},warn:function(){void 0!==window.console&&"function"===typeof window.console.warn&&window.console.warn.apply(window.console,arguments)},deprecated:function(oldName,newName,version){oldName=oldName+" is deprecated, please use "+newName+" instead.";version&&(oldName+=" Will be removed in "+version);Util.warn(oldName)},deprecatedMethod:function(oldName,newName,args,version){Util.deprecated(oldName,
newName,version);"function"===typeof this[newName]&&this[newName].apply(this,args)},cleanupAttrs:function(el,attrs){attrs.forEach(function(attr){el.removeAttribute(attr)})},cleanupTags:function(el,tags){-1!==tags.indexOf(el.nodeName.toLowerCase())&&el.parentNode.removeChild(el)},unwrapTags:function(el,tags){-1!==tags.indexOf(el.nodeName.toLowerCase())&&MediumEditor.util.unwrap(el,document)},getClosestTag:function(el,tag){return Util.traverseUp(el,function(element){return element.nodeName.toLowerCase()===
tag.toLowerCase()})},unwrap:function(el,doc){doc=doc.createDocumentFragment();for(var nodes=Array.prototype.slice.call(el.childNodes),i=0;i<nodes.length;i++)doc.appendChild(nodes[i]);doc.childNodes.length?el.parentNode.replaceChild(doc,el):el.parentNode.removeChild(el)},guid:function(){function _s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return _s4()+_s4()+"-"+_s4()+"-"+_s4()+"-"+_s4()+"-"+_s4()+_s4()+_s4()}};MediumEditor.util=Util})(window);(function(){var Extension=
function(options){MediumEditor.util.extend(this,options)};Extension.extend=function(protoProps){var parent=this;var child=protoProps&&protoProps.hasOwnProperty("constructor")?protoProps.constructor:function(){return parent.apply(this,arguments)};MediumEditor.util.extend(child,parent);var Surrogate=function(){this.constructor=child};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate;protoProps&&MediumEditor.util.extend(child.prototype,protoProps);return child};Extension.prototype={init:function(){},
base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(option){return this.base.options[option]}};["execAction","on","off","subscribe","trigger"].forEach(function(helper){Extension.prototype[helper]=function(){return this.base[helper].apply(this.base,
arguments)}});MediumEditor.Extension=Extension})();(function(){function filterOnlyParentElements(node){return MediumEditor.util.isBlockContainer(node)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}MediumEditor.selection={findMatchingSelectionParent:function(testElementFunction,contentWindow){contentWindow=contentWindow.getSelection();if(0===contentWindow.rangeCount)return!1;contentWindow=contentWindow.getRangeAt(0).commonAncestorContainer;return MediumEditor.util.traverseUp(contentWindow,testElementFunction)},
getSelectionElement:function(contentWindow){return this.findMatchingSelectionParent(function(el){return MediumEditor.util.isMediumEditorElement(el)},contentWindow)},exportSelection:function(root,doc){if(!root)return null;var selectionState=null,selection=doc.getSelection();if(0<selection.rangeCount){selection=selection.getRangeAt(0);selectionState=selection.cloneRange();selectionState.selectNodeContents(root);selectionState.setEnd(selection.startContainer,selection.startOffset);var start=selectionState.toString().length;
selectionState={start:start,end:start+selection.toString().length};this.doesRangeStartWithImages(selection,doc)&&(selectionState.startsWithImage=!0);var trailingImageCount=this.getTrailingImageCount(root,selectionState,selection.endContainer,selection.endOffset);trailingImageCount&&(selectionState.trailingImageCount=trailingImageCount);0!==start&&(root=this.getIndexRelativeToAdjacentEmptyBlocks(doc,root,selection.startContainer,selection.startOffset),-1!==root&&(selectionState.emptyBlocksIndex=root))}return selectionState},
importSelection:function(selectionState,root,doc,favorLaterSelectionAnchor){if(selectionState&&root){var range=doc.createRange();range.setStart(root,0);range.collapse(!0);var node=root,nodeStack=[],charIndex=0,foundStart=!1,foundEnd=!1,trailingImageCount=0,stop=!1,nextCharIndex,allowRangeToStartAtEndOfNode=!1,lastTextNode=null;if(favorLaterSelectionAnchor||selectionState.startsWithImage||"undefined"!==typeof selectionState.emptyBlocksIndex)allowRangeToStartAtEndOfNode=!0;for(;!stop&&node;)if(3<node.nodeType)node=
nodeStack.pop();else{if(3!==node.nodeType||foundEnd){if(selectionState.trailingImageCount&&foundEnd&&("img"===node.nodeName.toLowerCase()&&trailingImageCount++,trailingImageCount===selectionState.trailingImageCount)){for(stop=0;node.parentNode.childNodes[stop]!==node;)stop++;range.setEnd(node.parentNode,stop+1);stop=!0}if(!stop&&1===node.nodeType)for(nextCharIndex=node.childNodes.length-1;0<=nextCharIndex;)nodeStack.push(node.childNodes[nextCharIndex]),--nextCharIndex}else nextCharIndex=charIndex+
node.length,!foundStart&&selectionState.start>=charIndex&&selectionState.start<=nextCharIndex&&(allowRangeToStartAtEndOfNode||selectionState.start<nextCharIndex?(range.setStart(node,selectionState.start-charIndex),foundStart=!0):lastTextNode=node),foundStart&&selectionState.end>=charIndex&&selectionState.end<=nextCharIndex&&(selectionState.trailingImageCount?foundEnd=!0:(range.setEnd(node,selectionState.end-charIndex),stop=!0)),charIndex=nextCharIndex;stop||(node=nodeStack.pop())}!foundStart&&lastTextNode&&
(range.setStart(lastTextNode,lastTextNode.length),range.setEnd(lastTextNode,lastTextNode.length));"undefined"!==typeof selectionState.emptyBlocksIndex&&(range=this.importSelectionMoveCursorPastBlocks(doc,root,selectionState.emptyBlocksIndex,range));favorLaterSelectionAnchor&&(range=this.importSelectionMoveCursorPastAnchor(selectionState,range));this.selectRange(doc,range)}},importSelectionMoveCursorPastAnchor:function(selectionState,range){var nodeInsideAnchorTagFunction=function(node){return"a"===
node.nodeName.toLowerCase()};if(selectionState.start===selectionState.end&&3===range.startContainer.nodeType&&range.startOffset===range.startContainer.nodeValue.length&&MediumEditor.util.traverseUp(range.startContainer,nodeInsideAnchorTagFunction)){nodeInsideAnchorTagFunction=range.startContainer;for(selectionState=range.startContainer.parentNode;null!==selectionState&&"a"!==selectionState.nodeName.toLowerCase();)selectionState.childNodes[selectionState.childNodes.length-1]!==nodeInsideAnchorTagFunction?
selectionState=null:(nodeInsideAnchorTagFunction=selectionState,selectionState=selectionState.parentNode);if(null!==selectionState&&"a"===selectionState.nodeName.toLowerCase()){nodeInsideAnchorTagFunction=null;for(var i=0;null===nodeInsideAnchorTagFunction&&i<selectionState.parentNode.childNodes.length;i++)selectionState.parentNode.childNodes[i]===selectionState&&(nodeInsideAnchorTagFunction=i);range.setStart(selectionState.parentNode,nodeInsideAnchorTagFunction+1);range.collapse(!0)}}return range},
importSelectionMoveCursorPastBlocks:function(doc,root,index,range){doc=doc.createTreeWalker(root,NodeFilter.SHOW_ELEMENT,filterOnlyParentElements,!1);var startContainer=range.startContainer;root=0;index=index||1;for(startContainer=3===startContainer.nodeType&&MediumEditor.util.isBlockContainer(startContainer.previousSibling)?startContainer.previousSibling:MediumEditor.util.getClosestBlockContainer(startContainer);doc.nextNode();)if(targetNode){var targetNode=doc.currentNode;root++;if(root===index)break;
if(0<targetNode.textContent.length)break}else startContainer===doc.currentNode&&(targetNode=doc.currentNode);targetNode||(targetNode=startContainer);range.setStart(MediumEditor.util.getFirstSelectableLeafNode(targetNode),0);return range},getIndexRelativeToAdjacentEmptyBlocks:function(doc,root,cursorContainer,cursorOffset){if(0<cursorContainer.textContent.length&&0<cursorOffset)return-1;var node=cursorContainer;3!==node.nodeType&&(node=cursorContainer.childNodes[cursorOffset]);if(node){if(!MediumEditor.util.isElementAtBeginningOfBlock(node))return-1;
cursorOffset=MediumEditor.util.findPreviousSibling(node);if(!cursorOffset||cursorOffset.nodeValue)return-1}cursorContainer=MediumEditor.util.getClosestBlockContainer(cursorContainer);doc=doc.createTreeWalker(root,NodeFilter.SHOW_ELEMENT,filterOnlyParentElements,!1);for(root=0;doc.nextNode();){if((cursorOffset=""===doc.currentNode.textContent)||0<root)root+=1;if(doc.currentNode===cursorContainer)break;cursorOffset||(root=0)}return root},doesRangeStartWithImages:function(range,doc){if(0!==range.startOffset||
1!==range.startContainer.nodeType)return!1;if("img"===range.startContainer.nodeName.toLowerCase())return!0;var img=range.startContainer.querySelector("img");if(!img)return!1;for(range=doc.createTreeWalker(range.startContainer,NodeFilter.SHOW_ALL,null,!1);range.nextNode();){doc=range.currentNode;if(doc===img)break;if(doc.nodeValue)return!1}return!0},getTrailingImageCount:function(root,selectionState,endContainer,endOffset){if(0===endOffset||1!==endContainer.nodeType||"img"!==endContainer.nodeName.toLowerCase()&&
!endContainer.querySelector("img"))return 0;for(endContainer=endContainer.childNodes[endOffset-1];endContainer.hasChildNodes();)endContainer=endContainer.lastChild;endOffset=[];for(var charIndex=0,foundStart=!1,foundEnd=!1,stop=!1,nextCharIndex,trailingImages=0;!stop&&root;)if(3<root.nodeType)root=endOffset.pop();else{if(3!==root.nodeType||foundEnd)if("img"===root.nodeName.toLowerCase()&&trailingImages++,root===endContainer)stop=!0;else{if(1===root.nodeType)for(nextCharIndex=root.childNodes.length-
1;0<=nextCharIndex;)endOffset.push(root.childNodes[nextCharIndex]),--nextCharIndex}else trailingImages=0,nextCharIndex=charIndex+root.length,!foundStart&&selectionState.start>=charIndex&&selectionState.start<=nextCharIndex&&(foundStart=!0),foundStart&&selectionState.end>=charIndex&&selectionState.end<=nextCharIndex&&(foundEnd=!0),charIndex=nextCharIndex;stop||(root=endOffset.pop())}return trailingImages},selectionContainsContent:function(doc){doc=doc.getSelection();return doc&&!doc.isCollapsed&&doc.rangeCount?
""!==doc.toString().trim()?!0:(doc=this.getSelectedParentElement(doc.getRangeAt(0)))&&("img"===doc.nodeName.toLowerCase()||1===doc.nodeType&&doc.querySelector("img"))?!0:!1:!1},selectionInContentEditableFalse:function(contentWindow){var sawtrue;contentWindow=this.findMatchingSelectionParent(function(el){var ce=el&&el.getAttribute("contenteditable");"true"===ce&&(sawtrue=!0);return"#text"!==el.nodeName&&"false"===ce},contentWindow);return!sawtrue&&contentWindow},getSelectionHtml:function(doc){var html=
"",sel=doc.getSelection();if(sel.rangeCount){var container=doc.createElement("div");doc=0;for(html=sel.rangeCount;doc<html;doc+=1)container.appendChild(sel.getRangeAt(doc).cloneContents());html=container.innerHTML}return html},getCaretOffsets:function(element,range){range||(range=window.getSelection().getRangeAt(0));var preCaretRange=range.cloneRange();var postCaretRange=range.cloneRange();preCaretRange.selectNodeContents(element);preCaretRange.setEnd(range.endContainer,range.endOffset);postCaretRange.selectNodeContents(element);
postCaretRange.setStart(range.endContainer,range.endOffset);return{left:preCaretRange.toString().length,right:postCaretRange.toString().length}},rangeSelectsSingleNode:function(range){var startNode=range.startContainer;return startNode===range.endContainer&&startNode.hasChildNodes()&&range.endOffset===range.startOffset+1},getSelectedParentElement:function(range){return range?this.rangeSelectsSingleNode(range)&&3!==range.startContainer.childNodes[range.startOffset].nodeType?range.startContainer.childNodes[range.startOffset]:
3===range.startContainer.nodeType?range.startContainer.parentNode:range.startContainer:null},getSelectedElements:function(doc){var selection=doc.getSelection();if(!selection.rangeCount||selection.isCollapsed||!selection.getRangeAt(0).commonAncestorContainer)return[];var range=selection.getRangeAt(0);if(3===range.commonAncestorContainer.nodeType){doc=[];for(range=range.commonAncestorContainer;range.parentNode&&1===range.parentNode.childNodes.length;)doc.push(range.parentNode),range=range.parentNode;
return doc}return[].filter.call(range.commonAncestorContainer.getElementsByTagName("*"),function(el){return"function"===typeof selection.containsNode?selection.containsNode(el,!0):!0})},selectNode:function(node,doc){var range=doc.createRange();range.selectNodeContents(node);this.selectRange(doc,range)},select:function(doc,startNode,startOffset,endNode,endOffset){var range=doc.createRange();range.setStart(startNode,startOffset);endNode?range.setEnd(endNode,endOffset):range.collapse(!0);this.selectRange(doc,
range);return range},clearSelection:function(doc,moveCursorToStart){moveCursorToStart?doc.getSelection().collapseToStart():doc.getSelection().collapseToEnd()},moveCursor:function(doc,node,offset){this.select(doc,node,offset)},getSelectionRange:function(ownerDocument){ownerDocument=ownerDocument.getSelection();return 0===ownerDocument.rangeCount?null:ownerDocument.getRangeAt(0)},selectRange:function(ownerDocument,range){ownerDocument=ownerDocument.getSelection();ownerDocument.removeAllRanges();ownerDocument.addRange(range)},
getSelectionStart:function(ownerDocument){return(ownerDocument=ownerDocument.getSelection().anchorNode)&&3===ownerDocument.nodeType?ownerDocument.parentNode:ownerDocument}}})();(function(){function isElementDescendantOfExtension(extensions,element){return extensions?extensions.some(function(extension){if("function"!==typeof extension.getInteractionElements)return!1;extension=extension.getInteractionElements();if(!extension)return!1;Array.isArray(extension)||(extension=[extension]);return extension.some(function(el){return MediumEditor.util.isDescendant(el,
element,!0)})}):!1}var Events=function(instance){this.base=instance;this.options=this.base.options;this.events=[];this.disabledEvents={};this.customEvents={};this.listeners={}};Events.prototype={InputEventOnContenteditableSupported:!MediumEditor.util.isIE&&!MediumEditor.util.isEdge,attachDOMEvent:function(targets,event,listener,useCapture){var win=this.base.options.contentWindow,doc=this.base.options.ownerDocument;targets=MediumEditor.util.isElement(targets)||-1<[win,doc].indexOf(targets)?[targets]:
targets;Array.prototype.forEach.call(targets,function(target){target.addEventListener(event,listener,useCapture);this.events.push([target,event,listener,useCapture])}.bind(this))},detachDOMEvent:function(targets,event,listener,useCapture){var index,e,win=this.base.options.contentWindow,doc=this.base.options.ownerDocument;targets&&(targets=MediumEditor.util.isElement(targets)||-1<[win,doc].indexOf(targets)?[targets]:targets,Array.prototype.forEach.call(targets,function(target){index=this.indexOfListener(target,
event,listener,useCapture);-1!==index&&(e=this.events.splice(index,1)[0],e[0].removeEventListener(e[1],e[2],e[3]))}.bind(this)))},indexOfListener:function(target,event,listener,useCapture){var n;var i=0;for(n=this.events.length;i<n;i+=1){var item=this.events[i];if(item[0]===target&&item[1]===event&&item[2]===listener&&item[3]===useCapture)return i}return-1},detachAllDOMEvents:function(){for(var e=this.events.pop();e;)e[0].removeEventListener(e[1],e[2],e[3]),e=this.events.pop()},detachAllEventsFromElement:function(element){for(var filtered=
this.events.filter(function(e){return e&&e[0].getAttribute&&e[0].getAttribute("medium-editor-index")===element.getAttribute("medium-editor-index")}),i=0,len=filtered.length;i<len;i++){var e$jscomp$0=filtered[i];this.detachDOMEvent(e$jscomp$0[0],e$jscomp$0[1],e$jscomp$0[2],e$jscomp$0[3])}},attachAllEventsToElement:function(element){this.listeners.editableInput&&(this.contentCache[element.getAttribute("medium-editor-index")]=element.innerHTML);this.eventsCache&&this.eventsCache.forEach(function(e){this.attachDOMEvent(element,
e.name,e.handler.bind(this))},this)},enableCustomEvent:function(event){void 0!==this.disabledEvents[event]&&delete this.disabledEvents[event]},disableCustomEvent:function(event){this.disabledEvents[event]=!0},attachCustomEvent:function(event,listener){this.setupListener(event);this.customEvents[event]||(this.customEvents[event]=[]);this.customEvents[event].push(listener)},detachCustomEvent:function(event,listener){listener=this.indexOfCustomListener(event,listener);-1!==listener&&this.customEvents[event].splice(listener,
1)},indexOfCustomListener:function(event,listener){return this.customEvents[event]&&this.customEvents[event].length?this.customEvents[event].indexOf(listener):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(name,data,editable){this.customEvents[name]&&!this.disabledEvents[name]&&this.customEvents[name].forEach(function(listener){listener(data,editable)})},destroy:function(){this.detachAllDOMEvents();this.detachAllCustomEvents();this.detachExecCommand();this.base.elements&&
this.base.elements.forEach(function(element){element.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(execInfo){this.handleDocumentExecCommand(execInfo)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var doc=this.options.ownerDocument;if(this.execCommandListener&&doc.execCommand.listeners){var index=doc.execCommand.listeners.indexOf(this.execCommandListener);
-1!==index&&doc.execCommand.listeners.splice(index,1);doc.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var doc=this.options.ownerDocument;if(!doc.execCommand.listeners){var callListeners=function(args,result){doc.execCommand.listeners&&doc.execCommand.listeners.forEach(function(listener){listener({command:args[0],value:args[2],args:args,result:result})})},wrapper=function(){var result=doc.execCommand.orig.apply(this,arguments);if(!doc.execCommand.listeners)return result;
var args=Array.prototype.slice.call(arguments);callListeners(args,result);return result};wrapper.orig=doc.execCommand;wrapper.listeners=[];wrapper.callListeners=callListeners;doc.execCommand=wrapper}},unwrapExecCommand:function(){var doc=this.options.ownerDocument;doc.execCommand.orig&&(doc.execCommand=doc.execCommand.orig)},setupListener:function(name){if(!this.listeners[name]){switch(name){case "externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),
!0);this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0);this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case "blur":this.setupListener("externalInteraction");break;case "focus":this.setupListener("externalInteraction");break;case "editableInput":this.contentCache={};this.base.elements.forEach(function(element){this.contentCache[element.getAttribute("medium-editor-index")]=element.innerHTML},this);this.InputEventOnContenteditableSupported&&
this.attachToEachElement("input",this.handleInput);this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case "editableClick":this.attachToEachElement("click",this.handleClick);break;case "editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case "editableKeypress":this.attachToEachElement("keypress",
this.handleKeypress);break;case "editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case "editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case "editableKeydownSpace":this.setupListener("editableKeydown");break;case "editableKeydownEnter":this.setupListener("editableKeydown");break;case "editableKeydownTab":this.setupListener("editableKeydown");break;case "editableKeydownDelete":this.setupListener("editableKeydown");break;case "editableMouseover":this.attachToEachElement("mouseover",
this.handleMouseover);break;case "editableDrag":this.attachToEachElement("dragover",this.handleDragging);this.attachToEachElement("dragleave",this.handleDragging);break;case "editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case "editablePaste":this.attachToEachElement("paste",this.handlePaste)}this.listeners[name]=!0}},attachToEachElement:function(name,handler){this.eventsCache||(this.eventsCache=[]);this.base.elements.forEach(function(element){this.attachDOMEvent(element,name,
handler.bind(this))},this);this.eventsCache.push({name:name,handler:handler})},cleanupElement:function(element){var index=element.getAttribute("medium-editor-index");index&&(this.detachAllEventsFromElement(element),this.contentCache&&delete this.contentCache[index])},focusElement:function(element){element.focus();this.updateFocus(element,{target:element,type:"focus"})},updateFocus:function(target,eventObj){var hadFocus=this.base.getFocusedElement(),toFocus;hadFocus&&"click"===eventObj.type&&this.lastMousedownTarget&&
(MediumEditor.util.isDescendant(hadFocus,this.lastMousedownTarget,!0)||isElementDescendantOfExtension(this.base.extensions,this.lastMousedownTarget))&&(toFocus=hadFocus);toFocus||this.base.elements.some(function(element){!toFocus&&MediumEditor.util.isDescendant(element,target,!0)&&(toFocus=element);return!!toFocus},this);var externalEvent=!MediumEditor.util.isDescendant(hadFocus,target,!0)&&!isElementDescendantOfExtension(this.base.extensions,target);toFocus!==hadFocus&&(hadFocus&&externalEvent&&
(hadFocus.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",eventObj,hadFocus)),toFocus&&(toFocus.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",eventObj,toFocus)));externalEvent&&this.triggerCustomEvent("externalInteraction",eventObj)},updateInput:function(target,eventObj){if(this.contentCache){var index=target.getAttribute("medium-editor-index"),html=target.innerHTML;html!==this.contentCache[index]&&this.triggerCustomEvent("editableInput",eventObj,target);
this.contentCache[index]=html}},handleDocumentSelectionChange:function(event){if(event.currentTarget&&event.currentTarget.activeElement){var activeElement=event.currentTarget.activeElement,currentTarget;this.base.elements.some(function(element){return MediumEditor.util.isDescendant(element,activeElement,!0)?(currentTarget=element,!0):!1},this);currentTarget&&this.updateInput(currentTarget,{target:activeElement,currentTarget:currentTarget})}},handleDocumentExecCommand:function(){var target=this.base.getFocusedElement();
target&&this.updateInput(target,{target:target,currentTarget:target})},handleBodyClick:function(event){this.updateFocus(event.target,event)},handleBodyFocus:function(event){this.updateFocus(event.target,event)},handleBodyMousedown:function(event){this.lastMousedownTarget=event.target},handleInput:function(event){this.updateInput(event.currentTarget,event)},handleClick:function(event){this.triggerCustomEvent("editableClick",event,event.currentTarget)},handleBlur:function(event){this.triggerCustomEvent("editableBlur",
event,event.currentTarget)},handleKeypress:function(event){this.triggerCustomEvent("editableKeypress",event,event.currentTarget);if(this.keypressUpdateInput){var eventObj={target:event.target,currentTarget:event.currentTarget};setTimeout(function(){this.updateInput(eventObj.currentTarget,eventObj)}.bind(this),0)}},handleKeyup:function(event){this.triggerCustomEvent("editableKeyup",event,event.currentTarget)},handleMouseover:function(event){this.triggerCustomEvent("editableMouseover",event,event.currentTarget)},
handleDragging:function(event){this.triggerCustomEvent("editableDrag",event,event.currentTarget)},handleDrop:function(event){this.triggerCustomEvent("editableDrop",event,event.currentTarget)},handlePaste:function(event){this.triggerCustomEvent("editablePaste",event,event.currentTarget)},handleKeydown:function(event){this.triggerCustomEvent("editableKeydown",event,event.currentTarget);if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.SPACE))return this.triggerCustomEvent("editableKeydownSpace",
event,event.currentTarget);if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.ENTER)||event.ctrlKey&&MediumEditor.util.isKey(event,MediumEditor.util.keyCode.M))return this.triggerCustomEvent("editableKeydownEnter",event,event.currentTarget);if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.TAB))return this.triggerCustomEvent("editableKeydownTab",event,event.currentTarget);if(MediumEditor.util.isKey(event,[MediumEditor.util.keyCode.DELETE,MediumEditor.util.keyCode.BACKSPACE]))return this.triggerCustomEvent("editableKeydownDelete",
event,event.currentTarget)}};MediumEditor.Events=Events})();(function(){var Button=MediumEditor.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(options){Button.isBuiltInButton(options)?MediumEditor.Extension.call(this,this.defaults[options]):MediumEditor.Extension.call(this,options)},init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.button=
this.createButton();this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"===typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"===typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"===typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var button=this.document.createElement("button"),
content=this.contentDefault,ariaLabel=this.getAria(),buttonLabels=this.getEditorOption("buttonLabels");button.classList.add("medium-editor-action");button.classList.add("medium-editor-action-"+this.name);this.classList&&this.classList.forEach(function(className){button.classList.add(className)});button.setAttribute("data-action",this.getAction());ariaLabel&&(button.setAttribute("title",ariaLabel),button.setAttribute("aria-label",ariaLabel));this.attrs&&Object.keys(this.attrs).forEach(function(attr){button.setAttribute(attr,
this.attrs[attr])},this);"fontawesome"===buttonLabels&&this.contentFA&&(content=this.contentFA);button.innerHTML=content;return button},handleClick:function(event){event.preventDefault();event.stopPropagation();(event=this.getAction())&&this.execAction(event)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass"));delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass"));
delete this.knownState},queryCommandState:function(){var queryState=null;this.useQueryState&&(queryState=this.base.queryCommandState(this.getAction()));return queryState},isAlreadyApplied:function(node){var isMatch=!1,tagNames=this.getTagNames();if(!1===this.knownState||!0===this.knownState)return this.knownState;tagNames&&0<tagNames.length&&(isMatch=-1!==tagNames.indexOf(node.nodeName.toLowerCase()));if(!isMatch&&this.style){tagNames=this.style.value.split("|");var computedStyle=this.window.getComputedStyle(node,
null).getPropertyValue(this.style.prop);tagNames.forEach(function(val){this.knownState||!(isMatch=-1!==computedStyle.indexOf(val))&&"text-decoration"===this.style.prop||(this.knownState=isMatch)},this)}return isMatch}});Button.isBuiltInButton=function(name){return"string"===typeof name&&MediumEditor.extensions.button.prototype.defaults.hasOwnProperty(name)};MediumEditor.extensions.button=Button})();MediumEditor.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b",
"strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"\x3cb\x3eB\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-bold"\x3e\x3c/i\x3e'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"\x3cb\x3e\x3ci\x3eI\x3c/i\x3e\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-italic"\x3e\x3c/i\x3e'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",
value:"underline"},useQueryState:!0,contentDefault:"\x3cb\x3e\x3cu\x3eU\x3c/u\x3e\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-underline"\x3e\x3c/i\x3e'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"\x3cs\x3eA\x3c/s\x3e",contentFA:'\x3ci class\x3d"fa fa-strikethrough"\x3e\x3c/i\x3e'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],
contentDefault:"\x3cb\x3ex\x3csup\x3e1\x3c/sup\x3e\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-superscript"\x3e\x3c/i\x3e'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"\x3cb\x3ex\x3csub\x3e1\x3c/sub\x3e\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-subscript"\x3e\x3c/i\x3e'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"\x3cb\x3eimage\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-picture-o"\x3e\x3c/i\x3e'},html:{name:"html",
action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"\x3cb\x3ehtml\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-code"\x3e\x3c/i\x3e'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"\x3cb\x3e1.\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-list-ol"\x3e\x3c/i\x3e'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"\x3cb\x3e\x26bull;\x3c/b\x3e",
contentFA:'\x3ci class\x3d"fa fa-list-ul"\x3e\x3c/i\x3e'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"\x3cb\x3e\x26rarr;\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-indent"\x3e\x3c/i\x3e'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"\x3cb\x3e\x26larr;\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-outdent"\x3e\x3c/i\x3e'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",
value:"center"},contentDefault:"\x3cb\x3eC\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-align-center"\x3e\x3c/i\x3e'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"\x3cb\x3eJ\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-align-justify"\x3e\x3c/i\x3e'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"\x3cb\x3eL\x3c/b\x3e",
contentFA:'\x3ci class\x3d"fa fa-align-left"\x3e\x3c/i\x3e'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"\x3cb\x3eR\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-align-right"\x3e\x3c/i\x3e'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"\x3cb\x3eX\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-eraser"\x3e\x3c/i\x3e'},quote:{name:"quote",action:"append-blockquote",
aria:"blockquote",tagNames:["blockquote"],contentDefault:"\x3cb\x3e\x26ldquo;\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-quote-right"\x3e\x3c/i\x3e'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"\x3cb\x3e0101\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-code fa-lg"\x3e\x3c/i\x3e'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"\x3cb\x3eH1\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-header"\x3e\x3csup\x3e1\x3c/sup\x3e'},
h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"\x3cb\x3eH2\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-header"\x3e\x3csup\x3e2\x3c/sup\x3e'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"\x3cb\x3eH3\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-header"\x3e\x3csup\x3e3\x3c/sup\x3e'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"\x3cb\x3eH4\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-header"\x3e\x3csup\x3e4\x3c/sup\x3e'},
h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"\x3cb\x3eH5\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-header"\x3e\x3csup\x3e5\x3c/sup\x3e'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"\x3cb\x3eH6\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-header"\x3e\x3csup\x3e6\x3c/sup\x3e'}};(function(){var FormExtension=MediumEditor.extensions.button.extend({init:function(){MediumEditor.extensions.button.prototype.init.apply(this,
arguments)},formSaveLabel:"\x26#10003;",formCloseLabel:"\x26times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return this.hasForm?this.getForm().classList.contains(this.activeClass):!1},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var toolbar=this.base.getExtensionByName("toolbar");
toolbar&&toolbar.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var toolbar=this.base.getExtensionByName("toolbar");toolbar&&toolbar.hideToolbarDefaultActions()},setToolbarPosition:function(){var toolbar=this.base.getExtensionByName("toolbar");toolbar&&toolbar.setToolbarPosition()}});MediumEditor.extensions.form=FormExtension})();(function(){var AnchorForm=MediumEditor.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",
targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"\x3cb\x3e#\x3c/b\x3e",contentFA:'\x3ci class\x3d"fa fa-link"\x3e\x3c/i\x3e',init:function(){MediumEditor.extensions.form.prototype.init.apply(this,arguments);this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(event){event.preventDefault();event.stopPropagation();event=MediumEditor.selection.getSelectionRange(this.document);if("a"===
event.startContainer.nodeName.toLowerCase()||"a"===event.endContainer.nodeName.toLowerCase()||MediumEditor.util.getClosestTag(MediumEditor.selection.getSelectedParentElement(event),"a"))return this.execAction("unlink");this.isDisplayed()||this.showForm();return!1},handleKeydown:function(event){MediumEditor.util.isKey(event,MediumEditor.util.keyCode.K)&&MediumEditor.util.isMetaCtrlKey(event)&&!event.shiftKey&&this.handleClick(event)},getForm:function(){this.form||(this.form=this.createForm());return this.form},
getTemplate:function(){var template=['\x3cinput type\x3d"text" class\x3d"medium-editor-toolbar-input" placeholder\x3d"',this.placeholderText,'"\x3e'];template.push('\x3ca href\x3d"#" class\x3d"medium-editor-toolbar-save"\x3e',"fontawesome"===this.getEditorOption("buttonLabels")?'\x3ci class\x3d"fa fa-check"\x3e\x3c/i\x3e':this.formSaveLabel,"\x3c/a\x3e");template.push('\x3ca href\x3d"#" class\x3d"medium-editor-toolbar-close"\x3e',"fontawesome"===this.getEditorOption("buttonLabels")?'\x3ci class\x3d"fa fa-times"\x3e\x3c/i\x3e':
this.formCloseLabel,"\x3c/a\x3e");this.targetCheckbox&&template.push('\x3cdiv class\x3d"medium-editor-toolbar-form-row"\x3e','\x3cinput type\x3d"checkbox" class\x3d"medium-editor-toolbar-anchor-target" id\x3d"medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'"\x3e','\x3clabel for\x3d"medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'"\x3e',this.targetCheckboxText,"\x3c/label\x3e","\x3c/div\x3e");this.customClassOption&&template.push('\x3cdiv class\x3d"medium-editor-toolbar-form-row"\x3e',
'\x3cinput type\x3d"checkbox" class\x3d"medium-editor-toolbar-anchor-button"\x3e',"\x3clabel\x3e",this.customClassOptionText,"\x3c/label\x3e","\x3c/div\x3e");return template.join("")},isDisplayed:function(){return MediumEditor.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){MediumEditor.extensions.form.prototype.hideForm.apply(this);this.getInput().value=""},showForm:function(opts){var input=this.getInput(),targetCheckbox=this.getAnchorTargetCheckbox(),buttonCheckbox=this.getAnchorButtonCheckbox();
opts=opts||{value:""};"string"===typeof opts&&(opts={value:opts});this.base.saveSelection();this.hideToolbarDefaultActions();MediumEditor.extensions.form.prototype.showForm.apply(this);this.setToolbarPosition();input.value=opts.value;input.focus();targetCheckbox&&(targetCheckbox.checked="_blank"===opts.target);buttonCheckbox&&(opts=opts.buttonClass?opts.buttonClass.split(" "):[],buttonCheckbox.checked=-1!==opts.indexOf(this.customClassOption))},destroy:function(){if(!this.form)return!1;this.form.parentNode&&
this.form.parentNode.removeChild(this.form);delete this.form},getFormOpts:function(){var targetCheckbox=this.getAnchorTargetCheckbox(),buttonCheckbox=this.getAnchorButtonCheckbox(),opts={value:this.getInput().value.trim()};this.linkValidation&&(opts.value=this.checkLinkFormat(opts.value));opts.target="_self";targetCheckbox&&targetCheckbox.checked&&(opts.target="_blank");buttonCheckbox&&buttonCheckbox.checked&&(opts.buttonClass=this.customClassOption);return opts},doFormSave:function(){var opts=this.getFormOpts();
this.completeFormSave(opts)},completeFormSave:function(opts){this.base.restoreSelection();this.execAction(this.action,opts);this.base.checkSelection()},ensureEncodedUri:function(str){return str===decodeURI(str)?encodeURI(str):str},ensureEncodedUriComponent:function(str){return str===decodeURIComponent(str)?encodeURIComponent(str):str},ensureEncodedParam:function(param){param=param.split("\x3d");var val=param[1];return param[0]+(void 0===val?"":"\x3d"+this.ensureEncodedUriComponent(val))},ensureEncodedQuery:function(queryString){return queryString.split("\x26").map(this.ensureEncodedParam.bind(this)).join("\x26")},
checkLinkFormat:function(value){var hasScheme=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^#/i.test(value),scheme="",urlParts=value.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),path=urlParts[1],query=urlParts[2];urlParts=urlParts[3];if(/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/.test(value))return"tel:"+value;!hasScheme&&(value=path.split("/")[0],value.match(/.+(\.|:).+/)||"localhost"===value)&&(scheme="http://");return scheme+this.ensureEncodedUri(path)+(void 0===query?"":"?"+this.ensureEncodedQuery(query))+(void 0===
urlParts?"":"#"+urlParts)},doFormCancel:function(){this.base.restoreSelection();this.base.checkSelection()},attachFormEvents:function(form){var close=form.querySelector(".medium-editor-toolbar-close"),save=form.querySelector(".medium-editor-toolbar-save"),input=form.querySelector(".medium-editor-toolbar-input");this.on(form,"click",this.handleFormClick.bind(this));this.on(input,"keyup",this.handleTextboxKeyup.bind(this));this.on(close,"click",this.handleCloseClick.bind(this));this.on(save,"click",
this.handleSaveClick.bind(this),!0)},createForm:function(){var form=this.document.createElement("div");form.className="medium-editor-toolbar-form";form.id="medium-editor-toolbar-form-anchor-"+this.getEditorId();form.innerHTML=this.getTemplate();this.attachFormEvents(form);return form},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},
handleTextboxKeyup:function(event){event.keyCode===MediumEditor.util.keyCode.ENTER?(event.preventDefault(),this.doFormSave()):event.keyCode===MediumEditor.util.keyCode.ESCAPE&&(event.preventDefault(),this.doFormCancel())},handleFormClick:function(event){event.stopPropagation()},handleSaveClick:function(event){event.preventDefault();this.doFormSave()},handleCloseClick:function(event){event.preventDefault();this.doFormCancel()}});MediumEditor.extensions.anchor=AnchorForm})();(function(){var AnchorPreview=
MediumEditor.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview();this.getEditorOption("elementsContainer").appendChild(this.anchorPreview);this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var el=this.document.createElement("div");el.id="medium-editor-anchor-preview-"+
this.getEditorId();el.className="medium-editor-anchor-preview";el.innerHTML=this.getTemplate();this.on(el,"click",this.handleClick.bind(this));return el},getTemplate:function(){return'\x3cdiv class\x3d"medium-editor-toolbar-anchor-preview" id\x3d"medium-editor-toolbar-anchor-preview"\x3e    \x3ca class\x3d"medium-editor-toolbar-anchor-preview-inner"\x3e\x3c/a\x3e\x3c/div\x3e'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),
delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active");this.activeAnchor=null},showPreview:function(anchorEl){if(this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||anchorEl.getAttribute("data-disable-preview"))return!0;this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=anchorEl.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=
anchorEl.attributes.href.value);this.anchorPreview.classList.add("medium-toolbar-arrow-over");this.anchorPreview.classList.remove("medium-toolbar-arrow-under");this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active");this.activeAnchor=anchorEl;this.positionPreview();this.attachPreviewHandlers();return this},positionPreview:function(activeAnchor){activeAnchor=activeAnchor||this.activeAnchor;var containerWidth=
this.window.innerWidth,buttonHeight=this.anchorPreview.offsetHeight,boundary=activeAnchor.getBoundingClientRect(),diffLeft=this.diffLeft;activeAnchor=this.diffTop;var elementsContainer=this.getEditorOption("elementsContainer"),elementsContainerAbsolute=-1<["absolute","fixed"].indexOf(window.getComputedStyle(elementsContainer).getPropertyValue("position")),relativeBoundary={};var halfOffsetWidth=this.anchorPreview.offsetWidth/2;var toolbarExtension=this.base.getExtensionByName("toolbar");toolbarExtension&&
(diffLeft=toolbarExtension.diffLeft,activeAnchor=toolbarExtension.diffTop);diffLeft-=halfOffsetWidth;if(elementsContainerAbsolute){var elementsContainerBoundary=elementsContainer.getBoundingClientRect();["top","left"].forEach(function(key){relativeBoundary[key]=boundary[key]-elementsContainerBoundary[key]});relativeBoundary.width=boundary.width;relativeBoundary.height=boundary.height;boundary=relativeBoundary;containerWidth=elementsContainerBoundary.width;elementsContainerAbsolute=elementsContainer.scrollTop}else elementsContainerAbsolute=
this.window.pageYOffset;elementsContainer=boundary.left+boundary.width/2;elementsContainerAbsolute+=buttonHeight+boundary.top+boundary.height-activeAnchor-this.anchorPreview.offsetHeight;this.anchorPreview.style.top=Math.round(elementsContainerAbsolute)+"px";this.anchorPreview.style.right="initial";elementsContainer<halfOffsetWidth?(this.anchorPreview.style.left=diffLeft+halfOffsetWidth+"px",this.anchorPreview.style.right="initial"):containerWidth-elementsContainer<halfOffsetWidth?(this.anchorPreview.style.left=
"auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=diffLeft+elementsContainer+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this));this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(event){var anchorExtension=this.base.getExtensionByName("anchor"),
activeAnchor=this.activeAnchor;anchorExtension&&activeAnchor&&(event.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(activeAnchor){var opts={value:activeAnchor.attributes.href.value,target:activeAnchor.getAttribute("target"),buttonClass:activeAnchor.getAttribute("class")};anchorExtension.showForm(opts);activeAnchor=null}}.bind(this)));this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null;this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout);
this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(event){event=MediumEditor.util.getClosestTag(event.target,"a");if(!1!==event){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(event.outerHTML)||/href=["']#\S+["']/.test(event.outerHTML)))return!0;var toolbar=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&toolbar&&toolbar.isDisplayed&&toolbar.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==event&&this.detachPreviewHandlers();this.anchorToPreview=
event;this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this);this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout);this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime();this.hovering=!0},handlePreviewMouseout:function(event){event.relatedTarget&&/anchor-preview/.test(event.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;
(new Date).getTime()-this.lastOver>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer);this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)));
this.hidePreview();this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime();this.hovering=!0;this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this);this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this);this.intervalTimer=setInterval(this.updatePreview.bind(this),200);this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover);this.on(this.anchorPreview,
"mouseout",this.instanceHandlePreviewMouseout);this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover);this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});MediumEditor.extensions.anchorPreview=AnchorPreview})();(function(){var WHITESPACE_CHARS=" \t\n\r     \u2028\u2029".split("");var KNOWN_TLDS_REGEXP=/^(com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)$/i;
var LINK_REGEXP=/(((?:(https?:\/\/|ftps?:\/\/|nntp:\/\/)|www\d{0,3}[.]|[a-z0-9.\-]+[.](com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)\/)\S+(?:[^\s`!\[\]{};:'".,?«»“”‘’])))|(([a-z0-9\-]+\.)?[a-z0-9\-]+\.(com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw))/gi;
var AutoLink=MediumEditor.Extension.extend({init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.disableEventHandling=!1;this.subscribe("editableKeypress",this.onKeypress.bind(this));this.subscribe("editableBlur",this.onBlur.bind(this));this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var activeInstances=0,i=0;i<this.window._mediumEditors.length;i++){var editor=this.window._mediumEditors[i];null!==editor&&void 0!==editor.getExtensionByName("autoLink")&&
activeInstances++}return 1===activeInstances},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(blurEvent,editable){this.performLinking(editable)},onKeypress:function(keyPressEvent){!this.disableEventHandling&&MediumEditor.util.isKey(keyPressEvent,[MediumEditor.util.keyCode.SPACE,MediumEditor.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var sel=
this.base.exportSelection();this.performLinking(keyPressEvent.target)&&this.base.importSelection(sel,!0)}catch(e){window.console&&window.console.error("Failed to perform linking",e),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(contenteditable){var blockElements=MediumEditor.util.splitByBlockElements(contenteditable),documentModified=!1;0===blockElements.length&&(blockElements=[contenteditable]);for(var i=0;i<blockElements.length;i++)documentModified=this.removeObsoleteAutoLinkSpans(blockElements[i])||
documentModified,documentModified=this.performLinkingWithinElement(blockElements[i])||documentModified;this.base.events.updateInput(contenteditable,{target:contenteditable,currentTarget:contenteditable});return documentModified},removeObsoleteAutoLinkSpans:function(element){if(!element||3===element.nodeType)return!1;element=element.querySelectorAll('span[data-auto-link\x3d"true"]');for(var documentModified=!1,i=0;i<element.length;i++){var textContent=element[i].textContent;-1===textContent.indexOf("://")&&
(textContent=MediumEditor.util.ensureUrlHasProtocol(textContent));if(element[i].getAttribute("data-href")!==textContent&&!MediumEditor.util.getClosestTag(element[i],"a")){documentModified=!0;var trimmedTextContent=textContent.replace(/\s+$/,"");element[i].getAttribute("data-href")===trimmedTextContent?(textContent=MediumEditor.util.splitOffDOMTree(element[i],this.splitTextBeforeEnd(element[i],textContent.length-trimmedTextContent.length)),element[i].parentNode.insertBefore(textContent,element[i].nextSibling)):
MediumEditor.util.unwrap(element[i],this.document)}}return documentModified},splitTextBeforeEnd:function(element,characterCount){element=this.document.createTreeWalker(element,NodeFilter.SHOW_TEXT,null,!1);for(var lastChildNotExhausted=!0;lastChildNotExhausted;)lastChildNotExhausted=null!==element.lastChild();for(var currentNode;0<characterCount&&null!==currentNode;)currentNode=element.currentNode,lastChildNotExhausted=currentNode.nodeValue,lastChildNotExhausted.length>characterCount?(currentNode=
currentNode.splitText(lastChildNotExhausted.length-characterCount),characterCount=0):(currentNode=element.previousNode(),characterCount-=lastChildNotExhausted.length);return currentNode},performLinkingWithinElement:function(element){for(var matches=this.findLinkableText(element),matchIndex=0;matchIndex<matches.length;matchIndex++){var matchingTextNodes=MediumEditor.util.findOrCreateMatchingTextNodes(this.document,element,matches[matchIndex]);this.shouldNotLink(matchingTextNodes)||this.createAutoLink(matchingTextNodes,
matches[matchIndex].href)}return!1},shouldNotLink:function(textNodes){for(var shouldNotLink=!1,i=0;i<textNodes.length&&!1===shouldNotLink;i++)shouldNotLink=!!MediumEditor.util.traverseUp(textNodes[i],function(node){return"a"===node.nodeName.toLowerCase()||node.getAttribute&&"true"===node.getAttribute("data-auto-link")});return shouldNotLink},findLinkableText:function(contenteditable){contenteditable=contenteditable.textContent;for(var match,matches=[];null!==(match=LINK_REGEXP.exec(contenteditable));){var matchOk,
matchEnd=match.index+match[0].length;(matchOk=(matchOk=(0===match.index||-1!==WHITESPACE_CHARS.indexOf(contenteditable[match.index-1]))&&(matchEnd===contenteditable.length||-1!==WHITESPACE_CHARS.indexOf(contenteditable[matchEnd])))&&(-1!==match[0].indexOf("/")||KNOWN_TLDS_REGEXP.test(match[0].split(".").pop().split("?").shift())))&&matches.push({href:match[0],start:match.index,end:matchEnd})}return matches},createAutoLink:function(textNodes,href){href=MediumEditor.util.ensureUrlHasProtocol(href);
textNodes=MediumEditor.util.createLink(this.document,textNodes,href,this.getEditorOption("targetBlank")?"_blank":null);var span=this.document.createElement("span");span.setAttribute("data-auto-link","true");span.setAttribute("data-href",href);for(textNodes.insertBefore(span,textNodes.firstChild);1<textNodes.childNodes.length;)span.appendChild(textNodes.childNodes[1])}});MediumEditor.extensions.autoLink=AutoLink})();(function(){function clearClassNames(element){element=MediumEditor.util.getContainerEditorElement(element);
Array.prototype.slice.call(element.parentElement.querySelectorAll(".medium-editor-dragover")).forEach(function(el){el.classList.remove("medium-editor-dragover")})}var FileDragging=MediumEditor.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.subscribe("editableDrag",this.handleDrag.bind(this));this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(event){event.preventDefault();event.dataTransfer.dropEffect=
"copy";var target=event.target.classList?event.target:event.target.parentElement;clearClassNames(target);"dragover"===event.type&&target.classList.add("medium-editor-dragover")},handleDrop:function(event){event.preventDefault();event.stopPropagation();this.base.selectElement(event.target);var selection=this.base.exportSelection();selection.start=selection.end;this.base.importSelection(selection);event.dataTransfer.files&&Array.prototype.slice.call(event.dataTransfer.files).forEach(function(file){this.isAllowedFile(file)&&
file.type.match("image")&&this.insertImageFile(file)},this);clearClassNames(event.target)},isAllowedFile:function(file){return this.allowedTypes.some(function(fileType){return!!file.type.match(fileType)})},insertImageFile:function(file){if("function"===typeof FileReader){var fileReader=new FileReader;fileReader.readAsDataURL(file);fileReader.addEventListener("load",function(e){var addImageElement=this.document.createElement("img");addImageElement.src=e.target.result;MediumEditor.util.insertHTMLCommand(this.document,
addImageElement.outerHTML)}.bind(this))}}});MediumEditor.extensions.fileDragging=FileDragging})();(function(){var KeyboardCommands=MediumEditor.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.subscribe("editableKeydown",this.handleKeydown.bind(this));this.keys=
{};this.commands.forEach(function(command){var keyCode=command.key.charCodeAt(0);this.keys[keyCode]||(this.keys[keyCode]=[]);this.keys[keyCode].push(command)},this)},handleKeydown:function(event){var keyCode=MediumEditor.util.getKeyCode(event);if(this.keys[keyCode]){var isMeta=MediumEditor.util.isMetaCtrlKey(event),isShift=!!event.shiftKey,isAlt=!!event.altKey;this.keys[keyCode].forEach(function(data){data.meta!==isMeta||data.shift!==isShift||data.alt!==isAlt&&void 0!==data.alt||(event.preventDefault(),
event.stopPropagation(),"function"===typeof data.command?data.command.apply(this):!1!==data.command&&this.execAction(data.command))},this)}}});MediumEditor.extensions.keyboardCommands=KeyboardCommands})();(function(){var FontNameForm=MediumEditor.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"\x26#xB1;",contentFA:'\x3ci class\x3d"fa fa-font"\x3e\x3c/i\x3e',fonts:["","Arial","Verdana","Times New Roman"],init:function(){MediumEditor.extensions.form.prototype.init.apply(this,
arguments)},handleClick:function(event){event.preventDefault();event.stopPropagation();this.isDisplayed()||(event=this.document.queryCommandValue("fontName")+"",this.showForm(event));return!1},getForm:function(){this.form||(this.form=this.createForm());return this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none";this.getSelect().value=""},showForm:function(fontName){var select=this.getSelect();this.base.saveSelection();
this.hideToolbarDefaultActions();this.getForm().style.display="block";this.setToolbarPosition();select.value=fontName||"";select.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form);delete this.form},doFormSave:function(){this.base.restoreSelection();this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection();this.clearFontName();this.base.checkSelection()},createForm:function(){var doc=this.document,form=doc.createElement("div"),
select=doc.createElement("select"),close=doc.createElement("a"),save=doc.createElement("a");form.className="medium-editor-toolbar-form";form.id="medium-editor-toolbar-form-fontname-"+this.getEditorId();this.on(form,"click",this.handleFormClick.bind(this));for(var i=0;i<this.fonts.length;i++){var option=doc.createElement("option");option.innerHTML=this.fonts[i];option.value=this.fonts[i];select.appendChild(option)}select.className="medium-editor-toolbar-select";form.appendChild(select);this.on(select,
"change",this.handleFontChange.bind(this));save.setAttribute("href","#");save.className="medium-editor-toobar-save";save.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'\x3ci class\x3d"fa fa-check"\x3e\x3c/i\x3e':"\x26#10003;";form.appendChild(save);this.on(save,"click",this.handleSaveClick.bind(this),!0);close.setAttribute("href","#");close.className="medium-editor-toobar-close";close.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'\x3ci class\x3d"fa fa-times"\x3e\x3c/i\x3e':
"\x26times;";form.appendChild(close);this.on(close,"click",this.handleCloseClick.bind(this));return form},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){MediumEditor.selection.getSelectedElements(this.document).forEach(function(el){"font"===el.nodeName.toLowerCase()&&el.hasAttribute("face")&&el.removeAttribute("face")})},handleFontChange:function(){var font=this.getSelect().value;""===font?this.clearFontName():this.execAction("fontName",
{value:font})},handleFormClick:function(event){event.stopPropagation()},handleSaveClick:function(event){event.preventDefault();this.doFormSave()},handleCloseClick:function(event){event.preventDefault();this.doFormCancel()}});MediumEditor.extensions.fontName=FontNameForm})();(function(){var FontSizeForm=MediumEditor.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"\x26#xB1;",contentFA:'\x3ci class\x3d"fa fa-text-height"\x3e\x3c/i\x3e',init:function(){MediumEditor.extensions.form.prototype.init.apply(this,
arguments)},handleClick:function(event){event.preventDefault();event.stopPropagation();this.isDisplayed()||(event=this.document.queryCommandValue("fontSize")+"",this.showForm(event));return!1},getForm:function(){this.form||(this.form=this.createForm());return this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none";this.getInput().value=""},showForm:function(fontSize){var input=this.getInput();this.base.saveSelection();
this.hideToolbarDefaultActions();this.getForm().style.display="block";this.setToolbarPosition();input.value=fontSize||"";input.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form);delete this.form},doFormSave:function(){this.base.restoreSelection();this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection();this.clearFontSize();this.base.checkSelection()},createForm:function(){var doc=this.document,form=doc.createElement("div"),
input=doc.createElement("input"),close=doc.createElement("a");doc=doc.createElement("a");form.className="medium-editor-toolbar-form";form.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId();this.on(form,"click",this.handleFormClick.bind(this));input.setAttribute("type","range");input.setAttribute("min","1");input.setAttribute("max","7");input.className="medium-editor-toolbar-input";form.appendChild(input);this.on(input,"change",this.handleSliderChange.bind(this));doc.setAttribute("href",
"#");doc.className="medium-editor-toobar-save";doc.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'\x3ci class\x3d"fa fa-check"\x3e\x3c/i\x3e':"\x26#10003;";form.appendChild(doc);this.on(doc,"click",this.handleSaveClick.bind(this),!0);close.setAttribute("href","#");close.className="medium-editor-toobar-close";close.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'\x3ci class\x3d"fa fa-times"\x3e\x3c/i\x3e':"\x26times;";form.appendChild(close);this.on(close,"click",this.handleCloseClick.bind(this));
return form},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){MediumEditor.selection.getSelectedElements(this.document).forEach(function(el){"font"===el.nodeName.toLowerCase()&&el.hasAttribute("size")&&el.removeAttribute("size")})},handleSliderChange:function(){var size=this.getInput().value;"4"===size?this.clearFontSize():this.execAction("fontSize",{value:size})},handleFormClick:function(event){event.stopPropagation()},handleSaveClick:function(event){event.preventDefault();
this.doFormSave()},handleCloseClick:function(event){event.preventDefault();this.doFormCancel()}});MediumEditor.extensions.fontSize=FontSizeForm})();(function(){function getClipboardContent(event,win,doc){event=event.clipboardData||win.clipboardData||doc.dataTransfer;win={};if(!event)return win;event.getData&&(doc=event.getData("Text"))&&0<doc.length&&(win["text/plain"]=doc);if(event.types)for(doc=0;doc<event.types.length;doc++){var contentType=event.types[doc];win[contentType]=event.getData(contentType)}return win}
var lastRange=null,keyboardPasteEditable=null,stopProp=function(event){event.stopPropagation()},PasteHandler=MediumEditor.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);if(this.forcePlainText||this.cleanPastedHTML)this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(element){this.on(element,
"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this))},handleAddElement:function(event,editable){this.on(editable,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(event,editable){if(!event.defaultPrevented){var clipboardContent=getClipboardContent(event,this.window,this.document),pastedHTML=clipboardContent["text/html"];clipboardContent=clipboardContent["text/plain"];
this.window.clipboardData&&void 0===event.clipboardData&&!pastedHTML&&(pastedHTML=clipboardContent);if(pastedHTML||clipboardContent)event.preventDefault(),this.doPaste(pastedHTML,clipboardContent,editable)}},doPaste:function(pastedHTML,pastedPlain,editable){var html="";if(this.cleanPastedHTML&&pastedHTML)return this.cleanPaste(pastedHTML);if(pastedPlain){if(this.getEditorOption("disableReturn")||editable&&editable.getAttribute("data-disable-return"))html=MediumEditor.util.htmlEntities(pastedPlain);
else if(pastedHTML=pastedPlain.split(/[\r\n]+/g),1<pastedHTML.length)for(pastedPlain=0;pastedPlain<pastedHTML.length;pastedPlain+=1)""!==pastedHTML[pastedPlain]&&(html+="\x3cp\x3e"+MediumEditor.util.htmlEntities(pastedHTML[pastedPlain])+"\x3c/p\x3e");else html=MediumEditor.util.htmlEntities(pastedHTML[0]);MediumEditor.util.insertHTMLCommand(this.document,html)}},handlePasteBinPaste:function(event){if(event.defaultPrevented)this.removePasteBin();else{var clipboardContent=getClipboardContent(event,
this.window,this.document),pastedHTML=clipboardContent["text/html"],pastedPlain=clipboardContent["text/plain"],editable=keyboardPasteEditable;!this.cleanPastedHTML||pastedHTML?(event.preventDefault(),this.removePasteBin(),this.doPaste(pastedHTML,pastedPlain,editable),this.trigger("editablePaste",{currentTarget:editable,target:editable},editable)):setTimeout(function(){this.cleanPastedHTML&&(pastedHTML=this.getPasteBinHtml());this.removePasteBin();this.doPaste(pastedHTML,pastedPlain,editable);this.trigger("editablePaste",
{currentTarget:editable,target:editable},editable)}.bind(this),0)}},handleKeydown:function(event,editable){MediumEditor.util.isKey(event,MediumEditor.util.keyCode.V)&&MediumEditor.util.isMetaCtrlKey(event)&&(event.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(editable))},createPasteBin:function(editable){var range=MediumEditor.selection.getSelectionRange(this.document),top=this.window.pageYOffset;keyboardPasteEditable=editable;range&&(editable=range.getClientRects(),top=editable.length?
top+editable[0].top:void 0!==range.startContainer.getBoundingClientRect?top+range.startContainer.getBoundingClientRect().top:top+range.getBoundingClientRect().top);lastRange=range;range=this.document.createElement("div");range.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now();range.setAttribute("style","border: 1px red solid; position: absolute; top: "+top+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0");range.setAttribute("contentEditable",!0);range.innerHTML="%ME_PASTEBIN%";
this.document.body.appendChild(range);this.on(range,"focus",stopProp);this.on(range,"focusin",stopProp);this.on(range,"focusout",stopProp);range.focus();MediumEditor.selection.selectNode(range,this.document);this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this));this.on(range,"paste",this.boundHandlePaste)},removePasteBin:function(){null!==lastRange&&(MediumEditor.selection.selectRange(this.document,lastRange),lastRange=null);null!==keyboardPasteEditable&&(keyboardPasteEditable=
null);var pasteBinElm=this.getPasteBin();pasteBinElm&&pasteBinElm&&(this.off(pasteBinElm,"focus",stopProp),this.off(pasteBinElm,"focusin",stopProp),this.off(pasteBinElm,"focusout",stopProp),this.off(pasteBinElm,"paste",this.boundHandlePaste),pasteBinElm.parentElement.removeChild(pasteBinElm))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var pasteBinElm=this.getPasteBin();return!pasteBinElm||pasteBinElm.firstChild&&"mcepastebin"===pasteBinElm.firstChild.id?
!1:(pasteBinElm=pasteBinElm.innerHTML)&&"%ME_PASTEBIN%"!==pasteBinElm?pasteBinElm:!1},cleanPaste:function(text){var i;var tmp=/<p|<br|<div/.test(text);var workEl=[].concat(this.preCleanReplacements||[],[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/\x3c!--StartFragment--\x3e|\x3c!--EndFragment--\x3e/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g),
" "],[new RegExp(/<br class="Apple-interchange-newline">/g),"\x3cbr\x3e"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'\x3cspan class\x3d"replace-with italic bold"\x3e'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'\x3cspan class\x3d"replace-with italic"\x3e'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'\x3cspan class\x3d"replace-with bold"\x3e'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"\x3c$1$2\x3e"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi),
'\x3ca href\x3d"$1"\x3e'],[new RegExp(/<\/p>\n+/gi),"\x3c/p\x3e"],[new RegExp(/\n+<p/gi),"\x3cp"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]>/gi),"$1"]],this.cleanReplacements||[]);for(i=0;i<workEl.length;i+=1)text=text.replace(workEl[i][0],workEl[i][1]);if(!tmp)return this.pasteHTML(text);tmp=this.document.createElement("div");tmp.innerHTML="\x3cp\x3e"+text.split("\x3cbr\x3e\x3cbr\x3e").join("\x3c/p\x3e\x3cp\x3e")+"\x3c/p\x3e";text=tmp.querySelectorAll("a,p,div,br");
for(i=0;i<text.length;i+=1)switch(workEl=text[i],workEl.innerHTML=workEl.innerHTML.replace(/\n/gi," "),workEl.nodeName.toLowerCase()){case "p":case "div":this.filterCommonBlocks(workEl);break;case "br":this.filterLineBreak(workEl)}this.pasteHTML(tmp.innerHTML)},pasteHTML:function(html,options){options=MediumEditor.util.defaults({},options,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var i;var fragmentBody=this.document.createDocumentFragment();fragmentBody.appendChild(this.document.createElement("body"));
fragmentBody=fragmentBody.querySelector("body");fragmentBody.innerHTML=html;this.cleanupSpans(fragmentBody);html=fragmentBody.querySelectorAll("*");for(i=0;i<html.length;i+=1){var workEl=html[i];"a"===workEl.nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&MediumEditor.util.setTargetBlank(workEl);MediumEditor.util.cleanupAttrs(workEl,options.cleanAttrs);MediumEditor.util.cleanupTags(workEl,options.cleanTags);MediumEditor.util.unwrapTags(workEl,options.unwrapTags)}MediumEditor.util.insertHTMLCommand(this.document,
fragmentBody.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(el){return el&&("p"===el.nodeName.toLowerCase()||"div"===el.nodeName.toLowerCase())},filterCommonBlocks:function(el){/^\s*$/.test(el.textContent)&&el.parentNode&&el.parentNode.removeChild(el)},filterLineBreak:function(el){this.isCommonBlock(el.previousElementSibling)?this.removeWithParent(el):!this.isCommonBlock(el.parentNode)||el.parentNode.firstChild!==el&&el.parentNode.lastChild!==el?el.parentNode&&1===el.parentNode.childElementCount&&
""===el.parentNode.textContent&&this.removeWithParent(el):this.removeWithParent(el)},removeWithParent:function(el){el&&el.parentNode&&(el.parentNode.parentNode&&1===el.parentNode.childElementCount?el.parentNode.parentNode.removeChild(el.parentNode):el.parentNode.removeChild(el))},cleanupSpans:function(containerEl){var i,spans=containerEl.querySelectorAll(".replace-with"),isCEF=function(el){return el&&"#text"!==el.nodeName&&"false"===el.getAttribute("contenteditable")};for(i=0;i<spans.length;i+=1){var el$jscomp$0=
spans[i];var newEl=this.document.createElement(el$jscomp$0.classList.contains("bold")?"b":"i");el$jscomp$0.classList.contains("bold")&&el$jscomp$0.classList.contains("italic")?newEl.innerHTML="\x3ci\x3e"+el$jscomp$0.innerHTML+"\x3c/i\x3e":newEl.innerHTML=el$jscomp$0.innerHTML;el$jscomp$0.parentNode.replaceChild(newEl,el$jscomp$0)}spans=containerEl.querySelectorAll("span");for(i=0;i<spans.length;i+=1){el$jscomp$0=spans[i];if(MediumEditor.util.traverseUp(el$jscomp$0,isCEF))return!1;MediumEditor.util.unwrap(el$jscomp$0,
this.document)}}});MediumEditor.extensions.paste=PasteHandler})();(function(){var Placeholder=MediumEditor.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.initPlaceholders();this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(event,editable){this.initElement(editable)},initElement:function(el){el.getAttribute("data-placeholder")||
el.setAttribute("data-placeholder",this.text);this.updatePlaceholder(el)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(event,editable){this.cleanupElement(editable)},cleanupElement:function(el){el.getAttribute("data-placeholder")===this.text&&el.removeAttribute("data-placeholder")},showPlaceholder:function(el){el&&(MediumEditor.util.isFF&&0===el.childNodes.length?(el.classList.add("medium-editor-placeholder-relative"),el.classList.remove("medium-editor-placeholder")):
(el.classList.add("medium-editor-placeholder"),el.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(el){el&&(el.classList.remove("medium-editor-placeholder"),el.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(el,dontShow){if(el.querySelector("img, blockquote, ul, ol, table")||""!==el.textContent.replace(/^\s+|\s+$/g,""))return this.hidePlaceholder(el);dontShow||this.showPlaceholder(el)},attachEventHandlers:function(){this.hideOnClick&&
this.subscribe("focus",this.handleFocus.bind(this));this.subscribe("editableInput",this.handleInput.bind(this));this.subscribe("blur",this.handleBlur.bind(this));this.subscribe("addElement",this.handleAddElement.bind(this));this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(event,element){event=this.hideOnClick&&element===this.base.getFocusedElement();this.updatePlaceholder(element,event)},handleFocus:function(event,element){this.hidePlaceholder(element)},handleBlur:function(event,
element){this.updatePlaceholder(element)}});MediumEditor.extensions.placeholder=Placeholder})();(function(){var Toolbar=MediumEditor.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:"bold italic underline anchor h2 h3 quote".split(" "),diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,
init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.initThrottledMethods();this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(iterator,context){return this.base.extensions.forEach(function(command){if(command!==this)return iterator.apply(context||this,arguments)},this)},createToolbar:function(){var toolbar=this.document.createElement("div");
toolbar.id="medium-editor-toolbar-"+this.getEditorId();toolbar.className="medium-editor-toolbar";toolbar.className=this.static?toolbar.className+" static-toolbar":this.relativeContainer?toolbar.className+" medium-editor-relative-toolbar":toolbar.className+" medium-editor-stalker-toolbar";toolbar.appendChild(this.createToolbarButtons());this.forEachExtension(function(extension){extension.hasForm&&toolbar.appendChild(extension.getForm())});this.attachEventHandlers();return toolbar},createToolbarButtons:function(){var ul=
this.document.createElement("ul"),li,btn,extension,buttonName,buttonOpts;ul.id="medium-editor-toolbar-actions"+this.getEditorId();ul.className="medium-editor-toolbar-actions";ul.style.display="block";this.buttons.forEach(function(button){"string"===typeof button?(buttonName=button,buttonOpts=null):(buttonName=button.name,buttonOpts=button);(extension=this.base.addBuiltInExtension(buttonName,buttonOpts))&&"function"===typeof extension.getButton&&(btn=extension.getButton(this.base),li=this.document.createElement("li"),
MediumEditor.util.isElement(btn)?li.appendChild(btn):li.innerHTML=btn,ul.appendChild(li))},this);var buttons=ul.querySelectorAll("button");0<buttons.length&&(buttons[0].classList.add(this.firstButtonClass),buttons[buttons.length-1].classList.add(this.lastButtonClass));return ul},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){this.toolbar||
(this.toolbar=this.createToolbar());return this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=MediumEditor.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this));this.subscribe("focus",this.handleFocus.bind(this));this.subscribe("editableClick",
this.handleEditableClick.bind(this));this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this));this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this));if(this.static&&this.sticky)this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0);this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(event){if(event&&
event.target&&MediumEditor.util.isDescendant(this.getToolbarElement(),event.target))return!1;this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout);clearTimeout(this.delayShowTimeout);this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},
showToolbar:function(){clearTimeout(this.hideTimeout);this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&
(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms();this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block");this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(extension){extension.hasForm&&extension.isDisplayed()&&extension.hideForm()})},multipleBlockElementsSelected:function(){var regexBlockElements=
new RegExp("\x3c("+MediumEditor.util.blockContainerElementNames.join("|")+")[^\x3e]*\x3e","g");regexBlockElements=MediumEditor.selection.getSelectionHtml(this.document).replace(/<[^\/>][^>]*><\/[^>]+>/gim,"").match(regexBlockElements);return!!regexBlockElements&&1<regexBlockElements.length},modifySelection:function(){var selectionRange=this.window.getSelection().getRangeAt(0);if(this.standardizeSelectionStart&&selectionRange.startContainer.nodeValue&&selectionRange.startOffset===selectionRange.startContainer.nodeValue.length){var adjacentNode=
MediumEditor.util.findAdjacentTextNodeWithContent(MediumEditor.selection.getSelectionElement(this.window),selectionRange.startContainer,this.document);if(adjacentNode){for(var offset=0;0===adjacentNode.nodeValue.substr(offset,1).trim().length;)offset+=1;MediumEditor.selection.select(this.document,adjacentNode,offset,selectionRange.endContainer,selectionRange.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||MediumEditor.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();
var selectionElement=MediumEditor.selection.getSelectionElement(this.window);if(!selectionElement||-1===this.getEditorElements().indexOf(selectionElement)||selectionElement.getAttribute("data-disable-toolbar"))return this.hideToolbar();if(this.updateOnEmptySelection&&this.static)return this.showAndUpdateToolbar();if(!MediumEditor.selection.selectionContainsContent(this.document)||!1===this.allowMultiParagraphSelection&&this.multipleBlockElementsSelected())return this.hideToolbar();this.showAndUpdateToolbar()}},
showAndUpdateToolbar:function(){this.modifySelection();this.setToolbarButtonStates();this.trigger("positionToolbar",{},this.base.getFocusedElement());this.showToolbarDefaultActions();this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(extension){"function"===typeof extension.isActive&&"function"===typeof extension.setInactive&&extension.setInactive()});this.checkActiveButtons()},checkActiveButtons:function(){var manualStateChecks=[],queryState=null,selectionRange=
MediumEditor.selection.getSelectionRange(this.document),updateExtensionState=function(extension){"function"===typeof extension.checkState?extension.checkState(parentNode):"function"===typeof extension.isActive&&"function"===typeof extension.isAlreadyApplied&&"function"===typeof extension.setActive&&!extension.isActive()&&extension.isAlreadyApplied(parentNode)&&extension.setActive()};if(selectionRange){this.forEachExtension(function(extension){if("function"===typeof extension.queryCommandState&&(queryState=
extension.queryCommandState(),null!==queryState)){queryState&&"function"===typeof extension.setActive&&extension.setActive();return}manualStateChecks.push(extension)});var parentNode=MediumEditor.selection.getSelectedParentElement(selectionRange);if(this.getEditorElements().some(function(element){return MediumEditor.util.isDescendant(element,parentNode,!0)}))for(;parentNode;){manualStateChecks.forEach(updateExtensionState);if(MediumEditor.util.isMediumEditorElement(parentNode))break;parentNode=parentNode.parentNode}}},
positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var container=this.base.getFocusedElement(),selection=this.window.getSelection();if(!container)return this;if(this.static||!selection.isCollapsed)this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(container):this.positionToolbar(selection)),this.trigger("positionedToolbar",{},this.base.getFocusedElement())},positionStaticToolbar:function(container){this.getToolbarElement().style.left=
"0";var scrollTop=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,windowWidth=this.window.innerWidth,toolbarElement=this.getToolbarElement(),containerRect=container.getBoundingClientRect(),containerTop=containerRect.top+scrollTop,containerCenter=containerRect.left+containerRect.width/2,toolbarHeight=toolbarElement.offsetHeight,toolbarWidth=toolbarElement.offsetWidth,halfOffsetWidth=toolbarWidth/2;this.sticky?scrollTop>containerTop+container.offsetHeight-
toolbarHeight-this.stickyTopOffset?(toolbarElement.style.top=containerTop+container.offsetHeight-toolbarHeight+"px",toolbarElement.classList.remove("medium-editor-sticky-toolbar")):scrollTop>containerTop-toolbarHeight-this.stickyTopOffset?(toolbarElement.classList.add("medium-editor-sticky-toolbar"),toolbarElement.style.top=this.stickyTopOffset+"px"):(toolbarElement.classList.remove("medium-editor-sticky-toolbar"),toolbarElement.style.top=containerTop-toolbarHeight+"px"):toolbarElement.style.top=
containerTop-toolbarHeight+"px";switch(this.align){case "left":var targetLeft=containerRect.left;break;case "right":targetLeft=containerRect.right-toolbarWidth;break;case "center":targetLeft=containerCenter-halfOffsetWidth}0>targetLeft?targetLeft=0:targetLeft+toolbarWidth>windowWidth&&(targetLeft=windowWidth-Math.ceil(toolbarWidth)-1);toolbarElement.style.left=targetLeft+"px"},positionToolbar:function(selection){this.getToolbarElement().style.left="0";this.getToolbarElement().style.right="initial";
selection=selection.getRangeAt(0);var boundary=selection.getBoundingClientRect();if(!boundary||0===boundary.height&&0===boundary.width&&selection.startContainer===selection.endContainer)boundary=1===selection.startContainer.nodeType&&selection.startContainer.querySelector("img")?selection.startContainer.querySelector("img").getBoundingClientRect():selection.startContainer.getBoundingClientRect();selection=this.window.innerWidth;var toolbarElement=this.getToolbarElement(),toolbarHeight=toolbarElement.offsetHeight,
halfOffsetWidth=toolbarElement.offsetWidth/2,defaultLeft=this.diffLeft-halfOffsetWidth,elementsContainer=this.getEditorOption("elementsContainer"),positions={},relativeBoundary={};if(-1<["absolute","fixed"].indexOf(window.getComputedStyle(elementsContainer).getPropertyValue("position"))){var elementsContainerBoundary=elementsContainer.getBoundingClientRect();["top","left"].forEach(function(key){relativeBoundary[key]=boundary[key]-elementsContainerBoundary[key]});relativeBoundary.width=boundary.width;
relativeBoundary.height=boundary.height;boundary=relativeBoundary;selection=elementsContainerBoundary.width;positions.top=elementsContainer.scrollTop}else positions.top=this.window.pageYOffset;elementsContainer=boundary.left+boundary.width/2;positions.top+=boundary.top-toolbarHeight;50>boundary.top?(toolbarElement.classList.add("medium-toolbar-arrow-over"),toolbarElement.classList.remove("medium-toolbar-arrow-under"),positions.top+=50+boundary.height-this.diffTop):(toolbarElement.classList.add("medium-toolbar-arrow-under"),
toolbarElement.classList.remove("medium-toolbar-arrow-over"),positions.top+=this.diffTop);elementsContainer<halfOffsetWidth?(positions.left=defaultLeft+halfOffsetWidth,positions.right="initial"):selection-elementsContainer<halfOffsetWidth?(positions.left="auto",positions.right=0):(positions.left=defaultLeft+elementsContainer,positions.right="initial");["top","left","right"].forEach(function(key){toolbarElement.style[key]=positions[key]+(isNaN(positions[key])?"":"px")})}});MediumEditor.extensions.toolbar=
Toolbar})();(function(){var ImageDragging=MediumEditor.Extension.extend({init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.subscribe("editableDrag",this.handleDrag.bind(this));this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(event){event.preventDefault();event.dataTransfer.dropEffect="copy";"dragover"===event.type?event.target.classList.add("medium-editor-dragover"):"dragleave"===event.type&&event.target.classList.remove("medium-editor-dragover")},
handleDrop:function(event){event.preventDefault();event.stopPropagation();if(event.dataTransfer.files){var files=Array.prototype.slice.call(event.dataTransfer.files,0);files.some(function(file){if(file.type.match("image")){var fileReader=new FileReader;fileReader.readAsDataURL(file);var id="medium-img-"+ +new Date;MediumEditor.util.insertHTMLCommand(this.document,'\x3cimg class\x3d"medium-editor-image-loading" id\x3d"'+id+'" /\x3e');fileReader.onload=function(){var img=this.document.getElementById(id);
img&&(img.removeAttribute("id"),img.removeAttribute("class"),img.src=fileReader.result)}.bind(this)}}.bind(this))}event.target.classList.remove("medium-editor-dragover")}});MediumEditor.extensions.imageDragging=ImageDragging})();(function(){function handleDisableExtraSpaces(event){var node=MediumEditor.selection.getSelectionStart(this.options.ownerDocument),textContent=node.textContent;node=MediumEditor.selection.getCaretOffsets(node);(void 0===textContent[node.left-1]||""===textContent[node.left-
1].trim()||void 0!==textContent[node.left]&&""===textContent[node.left].trim())&&event.preventDefault()}function handleDisabledEnterKeydown(event,element){this.options.disableReturn||element.getAttribute("data-disable-return")?event.preventDefault():(this.options.disableDoubleReturn||element.getAttribute("data-disable-double-return"))&&((element=MediumEditor.selection.getSelectionStart(this.options.ownerDocument))&&""===element.textContent.trim()&&"li"!==element.nodeName.toLowerCase()||element.previousElementSibling&&
"br"!==element.previousElementSibling.nodeName.toLowerCase()&&""===element.previousElementSibling.textContent.trim())&&event.preventDefault()}function handleTabKeydown(event){var node=MediumEditor.selection.getSelectionStart(this.options.ownerDocument);"pre"===(node&&node.nodeName.toLowerCase())&&(event.preventDefault(),MediumEditor.util.insertHTMLCommand(this.options.ownerDocument,"    "));MediumEditor.util.isListItem(node)&&(event.preventDefault(),event.shiftKey?this.options.ownerDocument.execCommand("outdent",
!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function handleBlockDeleteKeydowns(event){var node=MediumEditor.selection.getSelectionStart(this.options.ownerDocument);var p=node.nodeName.toLowerCase();var isEmpty=/^(\s+|<br\/?>)?$/i,isHeader=/h\d/i;MediumEditor.util.isKey(event,[MediumEditor.util.keyCode.BACKSPACE,MediumEditor.util.keyCode.ENTER])&&node.previousElementSibling&&isHeader.test(p)&&0===MediumEditor.selection.getCaretOffsets(node).left?MediumEditor.util.isKey(event,
MediumEditor.util.keyCode.BACKSPACE)&&isEmpty.test(node.previousElementSibling.innerHTML)?(node.previousElementSibling.parentNode.removeChild(node.previousElementSibling),event.preventDefault()):!this.options.disableDoubleReturn&&MediumEditor.util.isKey(event,MediumEditor.util.keyCode.ENTER)&&(p=this.options.ownerDocument.createElement("p"),p.innerHTML="\x3cbr\x3e",node.previousElementSibling.parentNode.insertBefore(p,node),event.preventDefault()):MediumEditor.util.isKey(event,MediumEditor.util.keyCode.DELETE)&&
node.nextElementSibling&&node.previousElementSibling&&!isHeader.test(p)&&isEmpty.test(node.innerHTML)&&isHeader.test(node.nextElementSibling.nodeName.toLowerCase())?(MediumEditor.selection.moveCursor(this.options.ownerDocument,node.nextElementSibling),node.previousElementSibling.parentNode.removeChild(node),event.preventDefault()):MediumEditor.util.isKey(event,MediumEditor.util.keyCode.BACKSPACE)&&"li"===p&&isEmpty.test(node.innerHTML)&&!node.previousElementSibling&&!node.parentElement.previousElementSibling&&
node.nextElementSibling&&"li"===node.nextElementSibling.nodeName.toLowerCase()?(p=this.options.ownerDocument.createElement("p"),p.innerHTML="\x3cbr\x3e",node.parentElement.parentElement.insertBefore(p,node.parentElement),MediumEditor.selection.moveCursor(this.options.ownerDocument,p),node.parentElement.removeChild(node),event.preventDefault()):MediumEditor.util.isKey(event,MediumEditor.util.keyCode.BACKSPACE)&&!1!==MediumEditor.util.getClosestTag(node,"blockquote")&&0===MediumEditor.selection.getCaretOffsets(node).left?
(event.preventDefault(),MediumEditor.util.execFormatBlock(this.options.ownerDocument,"p")):MediumEditor.util.isKey(event,MediumEditor.util.keyCode.ENTER)&&!1!==MediumEditor.util.getClosestTag(node,"blockquote")&&0===MediumEditor.selection.getCaretOffsets(node).right?(p=this.options.ownerDocument.createElement("p"),p.innerHTML="\x3cbr\x3e",node.parentElement.insertBefore(p,node.nextSibling),MediumEditor.selection.moveCursor(this.options.ownerDocument,p),event.preventDefault()):MediumEditor.util.isKey(event,
MediumEditor.util.keyCode.BACKSPACE)&&MediumEditor.util.isMediumEditorElement(node.parentElement)&&!node.previousElementSibling&&node.nextElementSibling&&isEmpty.test(node.innerHTML)&&(event.preventDefault(),MediumEditor.selection.moveCursor(this.options.ownerDocument,node.nextSibling),node.parentElement.removeChild(node))}function handleKeyup(event){var node=MediumEditor.selection.getSelectionStart(this.options.ownerDocument);node&&(MediumEditor.util.isMediumEditorElement(node)&&0===node.children.length&&
!MediumEditor.util.isBlockContainer(node)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),!MediumEditor.util.isKey(event,MediumEditor.util.keyCode.ENTER)||MediumEditor.util.isListItem(node)||MediumEditor.util.isBlockContainer(node)||(node=node.nodeName.toLowerCase(),"a"===node?this.options.ownerDocument.execCommand("unlink",!1,null):event.shiftKey||event.ctrlKey||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function handleEditableInput(event,editable){if(event=editable.parentNode.querySelector('textarea[medium-editor-textarea-id\x3d"'+
editable.getAttribute("medium-editor-textarea-id")+'"]'))event.value=editable.innerHTML.trim()}function removeFromEditors(win){win._mediumEditors&&win._mediumEditors[this.id]&&(win._mediumEditors[this.id]=null)}function createElementsArray(selector,doc,filterEditorElements){var elements=[];selector||(selector=[]);"string"===typeof selector&&(selector=doc.querySelectorAll(selector));MediumEditor.util.isElement(selector)&&(selector=[selector]);if(filterEditorElements)for(doc=0;doc<selector.length;doc++)filterEditorElements=
selector[doc],!MediumEditor.util.isElement(filterEditorElements)||filterEditorElements.getAttribute("data-medium-editor-element")||filterEditorElements.getAttribute("medium-editor-textarea-id")||elements.push(filterEditorElements);else elements=Array.prototype.slice.apply(selector);return elements}function cleanupTextareaElement(element){var textarea=element.parentNode.querySelector('textarea[medium-editor-textarea-id\x3d"'+element.getAttribute("medium-editor-textarea-id")+'"]');textarea&&(textarea.classList.remove("medium-editor-hidden"),
textarea.removeAttribute("medium-editor-textarea-id"));element.parentNode&&element.parentNode.removeChild(element)}function setExtensionDefaults(extension,defaults){Object.keys(defaults).forEach(function(prop){void 0===extension[prop]&&(extension[prop]=defaults[prop])});return extension}function initExtension(extension,name,instance){extension=setExtensionDefaults(extension,{window:instance.options.contentWindow,document:instance.options.ownerDocument,base:instance});"function"===typeof extension.init&&
extension.init();extension.name||(extension.name=name);return extension}function isToolbarEnabled(){return this.elements.every(function(element){return!!element.getAttribute("data-disable-toolbar")})?!1:!1!==this.options.toolbar}function createContentEditable(textarea){for(var div=this.options.ownerDocument.createElement("div"),now=Date.now(),uniqueId="medium-editor-"+now,atts=textarea.attributes;this.options.ownerDocument.getElementById(uniqueId);)now++,uniqueId="medium-editor-"+now;div.className=
textarea.className;div.id=uniqueId;div.innerHTML=textarea.value;textarea.setAttribute("medium-editor-textarea-id",uniqueId);now=0;for(var n=atts.length;now<n;now++)div.hasAttribute(atts[now].nodeName)||div.setAttribute(atts[now].nodeName,atts[now].value);if(textarea.form)this.on(textarea.form,"reset",function(event){event.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(uniqueId))}.bind(this));textarea.classList.add("medium-editor-hidden");textarea.parentNode.insertBefore(div,
textarea);return div}function initExtensions(){this.extensions=[];Object.keys(this.options.extensions).forEach(function(name){"toolbar"!==name&&this.options.extensions[name]&&this.extensions.push(initExtension(this.options.extensions[name],name,this))},this);if(!this.options.extensions.imageDragging){var opts=this.options.fileDragging;opts||(opts={},!1===this.options.imageDragging&&(opts.allowedTypes=[]));this.addBuiltInExtension("fileDragging",opts)}opts=isToolbarEnabled.call(this)?!1!==this.options.anchorPreview:
!1;var builtIns={paste:!0,"anchor-preview":opts,autoLink:!1!==this.options.autoLink,keyboardCommands:!1!==this.options.keyboardCommands,placeholder:!1!==this.options.placeholder};Object.keys(builtIns).forEach(function(name){builtIns[name]&&this.addBuiltInExtension(name)},this);opts=this.options.extensions.toolbar;!opts&&isToolbarEnabled.call(this)&&(opts=MediumEditor.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection}),opts=new MediumEditor.extensions.toolbar(opts));
opts&&this.extensions.push(initExtension(opts,"toolbar",this))}function mergeOptions(defaults,options){var deprecatedProperties=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];options&&deprecatedProperties.forEach(function(pair){options.hasOwnProperty(pair[0])&&void 0!==options[pair[0]]&&MediumEditor.util.deprecated(pair[0],pair[1],"v6.0.0")});return MediumEditor.util.defaults({},options,defaults)}function execActionInternal(action,opts){var match;if(match=/^append-(.+)$/gi.exec(action))return MediumEditor.util.execFormatBlock(this.options.ownerDocument,
match[1]);if("fontSize"===action)return opts.size&&MediumEditor.util.deprecated(".size option for fontSize command",".value","6.0.0"),opts=opts.value||opts.size,this.options.ownerDocument.execCommand("fontSize",!1,opts);if("fontName"===action)return opts.name&&MediumEditor.util.deprecated(".name option for fontName command",".value","6.0.0"),opts=opts.value||opts.name,this.options.ownerDocument.execCommand("fontName",!1,opts);if("createLink"===action)return this.createLink(opts);if("image"===action)return action=
this.options.contentWindow.getSelection().toString().trim(),this.options.ownerDocument.execCommand("insertImage",!1,action);if("html"===action)return action=this.options.contentWindow.getSelection().toString().trim(),MediumEditor.util.insertHTMLCommand(this.options.ownerDocument,action);if(/justify([A-Za-z]*)$/g.exec(action))return action=this.options.ownerDocument.execCommand(action,!1,null),(opts=MediumEditor.selection.getSelectedParentElement(MediumEditor.selection.getSelectionRange(this.options.ownerDocument)))&&
cleanupJustifyDivFragments.call(this,MediumEditor.util.getTopBlockContainer(opts)),action;opts=opts&&opts.value;return this.options.ownerDocument.execCommand(action,!1,opts)}function cleanupJustifyDivFragments(blockContainer){if(blockContainer){var textAlign,childDivs=Array.prototype.slice.call(blockContainer.childNodes).filter(function(element){var isDiv="div"===element.nodeName.toLowerCase();isDiv&&!textAlign&&(textAlign=element.style.textAlign);return isDiv});childDivs.length&&(this.saveSelection(),
childDivs.forEach(function(div){if(div.style.textAlign===textAlign){var lastChild=div.lastChild;lastChild&&(MediumEditor.util.unwrap(div,this.options.ownerDocument),div=this.options.ownerDocument.createElement("BR"),lastChild.parentNode.insertBefore(div,lastChild.nextSibling))}},this),blockContainer.style.textAlign=textAlign,this.restoreSelection())}}var initialContent={};MediumEditor.prototype={init:function(elements,options){this.options=mergeOptions.call(this,this.defaults,options);this.origElements=
elements;this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body);return this.setup()},setup:function(){if(!this.isActive){var win=this.options.contentWindow;win._mediumEditors||(win._mediumEditors=[null]);this.id||(this.id=win._mediumEditors.length);win._mediumEditors[this.id]=this;this.events=new MediumEditor.Events(this);this.elements=[];this.addElements(this.origElements);0!==this.elements.length&&(this.isActive=!0,initExtensions.call(this),this.subscribe("editableKeydownTab",
handleTabKeydown.bind(this)),this.subscribe("editableKeydownDelete",handleBlockDeleteKeydowns.bind(this)),this.subscribe("editableKeydownEnter",handleBlockDeleteKeydowns.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",handleDisableExtraSpaces.bind(this)),this.instanceHandleEditableKeydownEnter||!this.options.disableReturn&&!this.options.disableDoubleReturn||(this.instanceHandleEditableKeydownEnter=handleDisabledEnterKeydown.bind(this),this.subscribe("editableKeydownEnter",
this.instanceHandleEditableKeydownEnter)))}},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(extension){"function"===typeof extension.destroy&&extension.destroy()},this),this.events.destroy(),this.elements.forEach(function(element){this.options.spellcheck&&(element.innerHTML=element.innerHTML);element.removeAttribute("contentEditable");element.removeAttribute("spellcheck");element.removeAttribute("data-medium-editor-element");element.classList.remove("medium-editor-element");
element.removeAttribute("role");element.removeAttribute("aria-multiline");element.removeAttribute("medium-editor-index");element.removeAttribute("data-medium-editor-editor-index");element.getAttribute("medium-editor-textarea-id")&&cleanupTextareaElement(element)},this),this.elements=[],this.instanceHandleEditableInput=this.instanceHandleEditableKeydownEnter=null,removeFromEditors.call(this,this.options.contentWindow))},on:function(target,event,listener,useCapture){this.events.attachDOMEvent(target,
event,listener,useCapture);return this},off:function(target,event,listener,useCapture){this.events.detachDOMEvent(target,event,listener,useCapture);return this},subscribe:function(event,listener){this.events.attachCustomEvent(event,listener);return this},unsubscribe:function(event,listener){this.events.detachCustomEvent(event,listener);return this},trigger:function(name,data,editable){this.events.triggerCustomEvent(name,data,editable);return this},delay:function(fn){var self=this;return setTimeout(function(){self.isActive&&
fn()},this.options.delay)},serialize:function(){var i,content={},len=this.elements.length;for(i=0;i<len;i+=1){var elementid=""!==this.elements[i].id?this.elements[i].id:"element-"+i;content[elementid]={value:this.elements[i].innerHTML.trim()}}return content},getExtensionByName:function(name){var extension;this.extensions&&this.extensions.length&&this.extensions.some(function(ext){return ext.name===name?(extension=ext,!0):!1});return extension},addBuiltInExtension:function(name,opts){var extension=
this.getExtensionByName(name);if(extension)return extension;switch(name){case "anchor":opts=MediumEditor.util.extend({},this.options.anchor,opts);extension=new MediumEditor.extensions.anchor(opts);break;case "anchor-preview":extension=new MediumEditor.extensions.anchorPreview(this.options.anchorPreview);break;case "autoLink":extension=new MediumEditor.extensions.autoLink;break;case "fileDragging":extension=new MediumEditor.extensions.fileDragging(opts);break;case "fontname":extension=new MediumEditor.extensions.fontName(this.options.fontName);
break;case "fontsize":extension=new MediumEditor.extensions.fontSize(opts);break;case "keyboardCommands":extension=new MediumEditor.extensions.keyboardCommands(this.options.keyboardCommands);break;case "paste":extension=new MediumEditor.extensions.paste(this.options.paste);break;case "placeholder":extension=new MediumEditor.extensions.placeholder(this.options.placeholder);break;default:MediumEditor.extensions.button.isBuiltInButton(name)&&(opts?(opts=MediumEditor.util.defaults({},opts,MediumEditor.extensions.button.prototype.defaults[name]),
extension=new MediumEditor.extensions.button(opts)):extension=new MediumEditor.extensions.button(name))}extension&&this.extensions.push(initExtension(extension,name,this));return extension},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var toolbar=this.getExtensionByName("toolbar");toolbar&&toolbar.checkState();return this},queryCommandState:function(action){var match,queryState=null;(match=
/^full-(.+)$/gi.exec(action))&&(action=match[1]);try{queryState=this.options.ownerDocument.queryCommandState(action)}catch(exc){queryState=null}return queryState},execAction:function(action,opts){var match;(match=/^full-(.+)$/gi.exec(action))?(this.saveSelection(),this.selectAllContents(),opts=execActionInternal.call(this,match[1],opts),this.restoreSelection()):opts=execActionInternal.call(this,action,opts);"insertunorderedlist"!==action&&"insertorderedlist"!==action||MediumEditor.util.cleanListDOM(this.options.ownerDocument,
this.getSelectedParentElement());this.checkSelection();return opts},getSelectedParentElement:function(range){void 0===range&&(range=this.options.contentWindow.getSelection().getRangeAt(0));return MediumEditor.selection.getSelectedParentElement(range)},selectAllContents:function(){var currNode=MediumEditor.selection.getSelectionElement(this.options.contentWindow);if(currNode){for(;1===currNode.children.length;)currNode=currNode.children[0];this.selectElement(currNode)}},selectElement:function(element){MediumEditor.selection.selectNode(element,
this.options.ownerDocument);(element=MediumEditor.selection.getSelectionElement(this.options.contentWindow))&&this.events.focusElement(element)},getFocusedElement:function(){var focused;this.elements.some(function(element){!focused&&element.getAttribute("data-medium-focused")&&(focused=element);return!!focused},this);return focused},exportSelection:function(){var selectionElement=MediumEditor.selection.getSelectionElement(this.options.contentWindow),editableElementIndex=this.elements.indexOf(selectionElement),
selectionState=null;0<=editableElementIndex&&(selectionState=MediumEditor.selection.exportSelection(selectionElement,this.options.ownerDocument));null!==selectionState&&0!==editableElementIndex&&(selectionState.editableElementIndex=editableElementIndex);return selectionState},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(selectionState,favorLaterSelectionAnchor){selectionState&&MediumEditor.selection.importSelection(selectionState,this.elements[selectionState.editableElementIndex||
0],this.options.ownerDocument,favorLaterSelectionAnchor)},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(opts){var currentEditor=MediumEditor.selection.getSelectionElement(this.options.contentWindow),customEvent={},targetUrl;if(-1!==this.elements.indexOf(currentEditor)){try{this.events.disableCustomEvent("editableInput");opts.url&&MediumEditor.util.deprecated(".url option for createLink",".value","6.0.0");if((targetUrl=opts.url||opts.value)&&0<targetUrl.trim().length){var currentSelection=
this.options.contentWindow.getSelection();if(currentSelection){var currRange=currentSelection.getRangeAt(0),commonAncestorContainer=currRange.commonAncestorContainer;3===currRange.endContainer.nodeType&&3!==currRange.startContainer.nodeType&&0===currRange.startOffset&&currRange.startContainer.firstChild===currRange.endContainer&&(commonAncestorContainer=currRange.endContainer);var startContainerParentElement=MediumEditor.util.getClosestBlockContainer(currRange.startContainer);var endContainerParentElement=
MediumEditor.util.getClosestBlockContainer(currRange.endContainer);if(3!==commonAncestorContainer.nodeType&&0!==commonAncestorContainer.textContent.length&&startContainerParentElement===endContainerParentElement){currentSelection=startContainerParentElement||currentEditor;var fragment=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink");var exportedSelection=this.exportSelection();fragment.appendChild(currentSelection.cloneNode(!0));currentEditor===currentSelection?MediumEditor.selection.select(this.options.ownerDocument,
currentSelection.firstChild,0,currentSelection.lastChild,3===currentSelection.lastChild.nodeType?currentSelection.lastChild.nodeValue.length:currentSelection.lastChild.childNodes.length):MediumEditor.selection.select(this.options.ownerDocument,currentSelection,0,currentSelection,currentSelection.childNodes.length);var modifiedExportedSelection=this.exportSelection();var textNodes=MediumEditor.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,fragment,{start:exportedSelection.start-modifiedExportedSelection.start,
end:exportedSelection.end-modifiedExportedSelection.start,editableElementIndex:exportedSelection.editableElementIndex});0===textNodes.length&&(fragment=this.options.ownerDocument.createDocumentFragment(),fragment.appendChild(commonAncestorContainer.cloneNode(!0)),textNodes=[fragment.firstChild.firstChild,fragment.firstChild.lastChild]);MediumEditor.util.createLink(this.options.ownerDocument,textNodes,targetUrl.trim());var leadingWhitespacesCount=(fragment.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;
MediumEditor.util.insertHTMLCommand(this.options.ownerDocument,fragment.firstChild.innerHTML.replace(/^\s+/,""));exportedSelection.start-=leadingWhitespacesCount;exportedSelection.end-=leadingWhitespacesCount;this.importSelection(exportedSelection)}else this.options.ownerDocument.execCommand("createLink",!1,targetUrl);this.options.targetBlank||"_blank"===opts.target?MediumEditor.util.setTargetBlank(MediumEditor.selection.getSelectionStart(this.options.ownerDocument),targetUrl):MediumEditor.util.removeTargetBlank(MediumEditor.selection.getSelectionStart(this.options.ownerDocument),
targetUrl);opts.buttonClass&&MediumEditor.util.addClassToAnchors(MediumEditor.selection.getSelectionStart(this.options.ownerDocument),opts.buttonClass)}}if(this.options.targetBlank||"_blank"===opts.target||opts.buttonClass){customEvent=this.options.ownerDocument.createEvent("HTMLEvents");customEvent.initEvent("input",!0,!0,this.options.contentWindow);opts=0;for(var len=this.elements.length;opts<len;opts+=1)this.elements[opts].dispatchEvent(customEvent)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",
customEvent,currentEditor)}},cleanPaste:function(text){this.getExtensionByName("paste").cleanPaste(text)},pasteHTML:function(html,options){this.getExtensionByName("paste").pasteHTML(html,options)},setContent:function(html,index){index=index||0;this.elements[index]&&(index=this.elements[index],index.innerHTML=html,this.checkContentChanged(index))},getContent:function(index){index=index||0;return this.elements[index]?this.elements[index].innerHTML.trim():null},checkContentChanged:function(editable){editable=
editable||MediumEditor.selection.getSelectionElement(this.options.contentWindow);this.events.updateInput(editable,{target:editable,currentTarget:editable})},resetContent:function(element){if(element){var index=this.elements.indexOf(element);-1!==index&&this.setContent(initialContent[element.getAttribute("medium-editor-index")],index)}else this.elements.forEach(function(el,idx){this.setContent(initialContent[el.getAttribute("medium-editor-index")],idx)},this)},addElements:function(selector){selector=
createElementsArray(selector,this.options.ownerDocument,!0);if(0===selector.length)return!1;selector.forEach(function(element){var editorId=this.id;if(!element.getAttribute("data-medium-editor-element")){"textarea"===element.nodeName.toLowerCase()&&(element=createContentEditable.call(this,element),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=handleEditableInput.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput)));this.options.disableEditing||element.getAttribute("data-disable-editing")||
(element.setAttribute("contentEditable",!0),element.setAttribute("spellcheck",this.options.spellcheck));this.instanceHandleEditableKeydownEnter||!element.getAttribute("data-disable-return")&&!element.getAttribute("data-disable-double-return")||(this.instanceHandleEditableKeydownEnter=handleDisabledEnterKeydown.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter));if(!this.options.disableReturn&&!element.getAttribute("data-disable-return"))this.on(element,"keyup",
handleKeyup.bind(this));var elementId=MediumEditor.util.guid();element.setAttribute("data-medium-editor-element",!0);element.classList.add("medium-editor-element");element.setAttribute("role","textbox");element.setAttribute("aria-multiline",!0);element.setAttribute("data-medium-editor-editor-index",editorId);element.setAttribute("medium-editor-index",elementId);initialContent[elementId]=element.innerHTML;this.events.attachAllEventsToElement(element)}this.elements.push(element);this.trigger("addElement",
{target:element,currentTarget:element},element)},this)},removeElements:function(selector){var toRemove=createElementsArray(selector,this.options.ownerDocument).map(function(el){return el.getAttribute("medium-editor-textarea-id")&&el.parentNode?el.parentNode.querySelector('div[medium-editor-textarea-id\x3d"'+el.getAttribute("medium-editor-textarea-id")+'"]'):el});this.elements=this.elements.filter(function(element){return-1!==toRemove.indexOf(element)?(this.events.cleanupElement(element),element.getAttribute("medium-editor-textarea-id")&&
cleanupTextareaElement(element),this.trigger("removeElement",{target:element,currentTarget:element},element),!1):!0},this)}};MediumEditor.getEditorFromElement=function(element){var index=element.getAttribute("data-medium-editor-editor-index");return(element=element&&element.ownerDocument&&(element.ownerDocument.defaultView||element.ownerDocument.parentWindow))&&element._mediumEditors&&element._mediumEditors[index]?element._mediumEditors[index]:null}})();MediumEditor.prototype.defaults={activeButtonClass:"medium-editor-button-active",
buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0};MediumEditor.parseVersionString=function(release){release=release.split("-");var version=release[0].split("."),preRelease=1<release.length?release[1]:"";return{major:parseInt(version[0],10),minor:parseInt(version[1],10),revision:parseInt(version[2],10),preRelease:preRelease,toString:function(){return[version[0],
version[1],version[2]].join(".")+(preRelease?"-"+preRelease:"")}}};MediumEditor.version=MediumEditor.parseVersionString.call(this,"5.23.3");return MediumEditor}())}
//# sourceMappingURL=module$node_modules$medium_editor$dist$js$medium_editor.js.map
