goog.provide('oc.web.components.secure_activity');
oc.web.components.secure_activity.win_width = (function oc$web$components$secure_activity$win_width(){
var or__4126__auto__ = document.documentElement.clientWidth;
if(cljs.core.truth_(or__4126__auto__)){
return or__4126__auto__;
} else {
return window.innerWidth;
}
});
oc.web.components.secure_activity.maybe_load_comments = (function oc$web$components$secure_activity$maybe_load_comments(s){
var activity_data = new cljs.core.Keyword(null,"activity-data","activity-data",1293689136).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(org.martinklepsch.derivatives.get_ref(s,new cljs.core.Keyword(null,"secure-activity-data","secure-activity-data",223405040))));
var comments_data = cljs.core.deref(org.martinklepsch.derivatives.get_ref(s,new cljs.core.Keyword(null,"comments-data","comments-data",1871210833)));
return oc.web.utils.activity.get_comments_if_needed.cljs$core$IFn$_invoke$arity$2(activity_data,comments_data);
});
oc.web.components.secure_activity.secure_activity = rum.core.build_defcs((function (s){
var map__46946 = org.martinklepsch.derivatives.react(s,new cljs.core.Keyword(null,"secure-activity-data","secure-activity-data",223405040));
var map__46946__$1 = (((((!((map__46946 == null))))?(((((map__46946.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__46946.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__46946):map__46946);
var activity_data = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__46946__$1,new cljs.core.Keyword(null,"activity-data","activity-data",1293689136));
var is_showing_alert = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__46946__$1,new cljs.core.Keyword(null,"is-showing-alert","is-showing-alert",1899000552));
var activity_author = new cljs.core.Keyword(null,"publisher","publisher",-153364540).cljs$core$IFn$_invoke$arity$1(activity_data);
var is_mobile_QMARK_ = oc.web.lib.responsive.is_tablet_or_mobile_QMARK_();
var id_token = org.martinklepsch.derivatives.react(s,new cljs.core.Keyword(null,"id-token","id-token",-339268306));
var org_data = clojure.set.rename_keys(cljs.core.select_keys(activity_data,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"org-slug","org-slug",-726595051),new cljs.core.Keyword(null,"org-name","org-name",53378517),new cljs.core.Keyword(null,"org-logo-url","org-logo-url",58175997)], null)),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"org-slug","org-slug",-726595051),new cljs.core.Keyword(null,"slug","slug",2029314850),new cljs.core.Keyword(null,"org-name","org-name",53378517),new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.Keyword(null,"org-logo-url","org-logo-url",58175997),new cljs.core.Keyword(null,"logo-url","logo-url",-1629105032)], null));
var comments_drv = org.martinklepsch.derivatives.react(s,new cljs.core.Keyword(null,"comments-data","comments-data",1871210833));
var comments_data = oc.web.utils.activity.activity_comments(activity_data,comments_drv);
var activity_link = oc.web.lib.utils.link_for.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"links","links",-654507394).cljs$core$IFn$_invoke$arity$1(org_data),"entries"], 0));
var attrs46940 = (oc.web.components.ui.login_overlay.login_overlays_handler.cljs$core$IFn$_invoke$arity$0 ? oc.web.components.ui.login_overlay.login_overlays_handler.cljs$core$IFn$_invoke$arity$0() : oc.web.components.ui.login_overlay.login_overlays_handler.call(null));
return cljs.core.apply.cljs$core$IFn$_invoke$arity$4(React.createElement,"div",((cljs.core.map_QMARK_(attrs46940))?sablono.interpreter.attributes(sablono.normalize.merge_with_class.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, ["secure-activity-container"], null)], null),attrs46940], 0))):({"className": "secure-activity-container"})),((cljs.core.map_QMARK_(attrs46940))?new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [sablono.interpreter.interpret((cljs.core.truth_(is_showing_alert)?(oc.web.components.ui.alert_modal.alert_modal.cljs$core$IFn$_invoke$arity$0 ? oc.web.components.ui.alert_modal.alert_modal.cljs$core$IFn$_invoke$arity$0() : oc.web.components.ui.alert_modal.alert_modal.call(null)):null)),sablono.interpreter.interpret((cljs.core.truth_(activity_data)?new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-header.group","div.activity-header.group",-205610764),(function (){var G__46949 = org_data;
var G__46950 = activity_link;
var G__46951 = ((is_mobile_QMARK_)?new cljs.core.Keyword(null,"never","never",50472977):new cljs.core.Keyword(null,"always","always",-1772028770));
return (oc.web.components.ui.org_avatar.org_avatar.cljs$core$IFn$_invoke$arity$3 ? oc.web.components.ui.org_avatar.org_avatar.cljs$core$IFn$_invoke$arity$3(G__46949,G__46950,G__46951) : oc.web.components.ui.org_avatar.org_avatar.call(null,G__46949,G__46950,G__46951));
})(),(cljs.core.truth_(id_token)?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-header-right","div.activity-header-right",-1342000555),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button.mlb-reset.login-as-bt","button.mlb-reset.login-as-bt",1908941286),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (){
return oc.web.actions.user.show_login(new cljs.core.Keyword(null,"login-with-email","login-with-email",-1597480700));
}),new cljs.core.Keyword(null,"data-toggle","data-toggle",436966687),((is_mobile_QMARK_)?null:"tooltip"),new cljs.core.Keyword(null,"data-placement","data-placement",166529525),"bottom",new cljs.core.Keyword(null,"data-container","data-container",1473653353),"body",new cljs.core.Keyword(null,"title","title",636505583),"Log in to view all posts"], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.login-as","span.login-as",1254255139),"Log in as ",new cljs.core.Keyword(null,"first-name","first-name",-1559982131).cljs$core$IFn$_invoke$arity$1(id_token)], null),(oc.web.components.ui.user_avatar.user_avatar_image.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.ui.user_avatar.user_avatar_image.cljs$core$IFn$_invoke$arity$1(id_token) : oc.web.components.ui.user_avatar.user_avatar_image.call(null,id_token))], null)], null):new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-header-right","div.activity-header-right",-1342000555),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button.mlb-reset.learn-more-bt","button.mlb-reset.learn-more-bt",-492149483),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (){
return oc.web.router.redirect_BANG_(oc.web.urls.home);
})], null),["learn more",((is_mobile_QMARK_)?null:" about Wut")].join('')], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.or","span.or",1197649752)," or "], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button.mlb-reset.login-bt","button.mlb-reset.login-bt",-1454140625),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (){
return oc.web.actions.user.show_login(new cljs.core.Keyword(null,"login-with-email","login-with-email",-1597480700));
})], null),"Login"], null)], null))], null):null)),sablono.interpreter.interpret((cljs.core.truth_(activity_data)?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-content-outer","div.activity-content-outer",1781845432),new cljs.core.PersistentVector(null, 10, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-content","div.activity-content",1941335061),(cljs.core.truth_(new cljs.core.Keyword(null,"headline","headline",-157157727).cljs$core$IFn$_invoke$arity$1(activity_data))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-title","div.activity-title",1089138646),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"dangerouslySetInnerHTML","dangerouslySetInnerHTML",-554971138),oc.web.lib.utils.emojify(new cljs.core.Keyword(null,"headline","headline",-157157727).cljs$core$IFn$_invoke$arity$1(activity_data)),new cljs.core.Keyword(null,"class","class",-2030961996),oc.web.lib.utils.hide_class], null)], null):null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-content-author","div.activity-content-author",1708842702),(function (){var G__46953 = new cljs.core.Keyword(null,"publisher","publisher",-153364540).cljs$core$IFn$_invoke$arity$1(activity_data);
return (oc.web.components.ui.user_avatar.user_avatar_image.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.ui.user_avatar.user_avatar_image.cljs$core$IFn$_invoke$arity$1(G__46953) : oc.web.components.ui.user_avatar.user_avatar_image.call(null,G__46953));
})(),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.name","div.name",1027675228),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),oc.web.lib.utils.hide_class], null),[cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"name","name",1843675177).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"publisher","publisher",-153364540).cljs$core$IFn$_invoke$arity$1(activity_data)))," in ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"board-name","board-name",-677515056).cljs$core$IFn$_invoke$arity$1(activity_data))," on "].join(''),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"time","time",1385887882),new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,"date-time","date-time",177938180),new cljs.core.Keyword(null,"published-at","published-at",249684621).cljs$core$IFn$_invoke$arity$1(activity_data),new cljs.core.Keyword(null,"data-toggle","data-toggle",436966687),((is_mobile_QMARK_)?null:"tooltip"),new cljs.core.Keyword(null,"data-placement","data-placement",166529525),"top",new cljs.core.Keyword(null,"data-container","data-container",1473653353),"body",new cljs.core.Keyword(null,"data-delay","data-delay",1974747786),"{\"show\":\"1000\", \"hide\":\"0\"}",new cljs.core.Keyword(null,"data-title","data-title",-83549535),oc.web.lib.utils.activity_date_tooltip(activity_data)], null),oc.web.lib.utils.date_string.cljs$core$IFn$_invoke$arity$variadic(oc.web.lib.utils.js_date.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"published-at","published-at",249684621).cljs$core$IFn$_invoke$arity$1(activity_data)], 0)),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"year","year",335913393)], null)], 0))], null)], null)], null),(cljs.core.truth_(new cljs.core.Keyword(null,"body","body",-2049205669).cljs$core$IFn$_invoke$arity$1(activity_data))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-body.oc-mentions.oc-mentions-hover","div.activity-body.oc-mentions.oc-mentions-hover",579188809),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"dangerouslySetInnerHTML","dangerouslySetInnerHTML",-554971138),oc.web.lib.utils.emojify(new cljs.core.Keyword(null,"body","body",-2049205669).cljs$core$IFn$_invoke$arity$1(activity_data)),new cljs.core.Keyword(null,"class","class",-2030961996),oc.web.lib.utils.hide_class], null)], null):null),((cljs.core.seq(new cljs.core.Keyword(null,"polls","polls",-580623582).cljs$core$IFn$_invoke$arity$1(activity_data)))?(function (){var G__46955 = new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"polls-data","polls-data",-975205110),new cljs.core.Keyword(null,"polls","polls",-580623582).cljs$core$IFn$_invoke$arity$1(activity_data),new cljs.core.Keyword(null,"container-selector","container-selector",6506114),"div.secure-activity-container"], null);
return (oc.web.components.ui.poll.polls_wrapper.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.ui.poll.polls_wrapper.cljs$core$IFn$_invoke$arity$1(G__46955) : oc.web.components.ui.poll.polls_wrapper.call(null,G__46955));
})():null),(function (){var G__46956 = new cljs.core.Keyword(null,"attachments","attachments",-1535547830).cljs$core$IFn$_invoke$arity$1(activity_data);
return (oc.web.components.ui.stream_attachments.stream_attachments.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.ui.stream_attachments.stream_attachments.cljs$core$IFn$_invoke$arity$1(G__46956) : oc.web.components.ui.stream_attachments.stream_attachments.call(null,G__46956));
})(),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-content-footer.group","div.activity-content-footer.group",-190222293),(function (){var G__46957 = new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"activity-data","activity-data",1293689136),activity_data,new cljs.core.Keyword(null,"comments-data","comments-data",1871210833),comments_drv,new cljs.core.Keyword(null,"current-activity-id","current-activity-id",-930108529),new cljs.core.Keyword(null,"uuid","uuid",-2145095719).cljs$core$IFn$_invoke$arity$1(activity_data)], null);
return (oc.web.components.ui.comments_summary.comments_summary.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.ui.comments_summary.comments_summary.cljs$core$IFn$_invoke$arity$1(G__46957) : oc.web.components.ui.comments_summary.comments_summary.call(null,G__46957));
})(),(function (){var G__46958 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"entity-data","entity-data",1608056141),activity_data], null);
return (oc.web.components.reactions.reactions.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.reactions.reactions.cljs$core$IFn$_invoke$arity$1(G__46958) : oc.web.components.reactions.reactions.call(null,G__46958));
})()], null),(cljs.core.truth_((function (){var or__4126__auto__ = (cljs.core.count(comments_data) > (0));
if(or__4126__auto__){
return or__4126__auto__;
} else {
return new cljs.core.Keyword(null,"can-comment","can-comment",718623455).cljs$core$IFn$_invoke$arity$1(activity_data);
}
})())?new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.comments-separator","div.comments-separator",876021438)], null):null),(cljs.core.truth_(new cljs.core.Keyword(null,"can-comment","can-comment",718623455).cljs$core$IFn$_invoke$arity$1(activity_data))?rum.core.with_key((function (){var G__46959 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"activity-data","activity-data",1293689136),activity_data], null);
return (oc.web.components.ui.add_comment.add_comment.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.ui.add_comment.add_comment.cljs$core$IFn$_invoke$arity$1(G__46959) : oc.web.components.ui.add_comment.add_comment.call(null,G__46959));
})(),["add-comment-",cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"uuid","uuid",-2145095719).cljs$core$IFn$_invoke$arity$1(activity_data))].join('')):null),(cljs.core.truth_(comments_data)?(function (){var G__46962 = new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"activity-data","activity-data",1293689136),activity_data,new cljs.core.Keyword(null,"comments-data","comments-data",1871210833),comments_data,new cljs.core.Keyword(null,"reply-add-comment-prefix","reply-add-comment-prefix",1123094795),"secure-activity",new cljs.core.Keyword(null,"current-user-id","current-user-id",-2013633451),new cljs.core.Keyword(null,"user-id","user-id",-206822291).cljs$core$IFn$_invoke$arity$1(id_token)], null);
return (oc.web.components.stream_comments.stream_comments.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.stream_comments.stream_comments.cljs$core$IFn$_invoke$arity$1(G__46962) : oc.web.components.stream_comments.stream_comments.call(null,G__46962));
})():null)], null)], null):null)),(function (){var attrs46941 = (cljs.core.truth_(id_token)?new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button.mlb-reset.secure-activity-footer-bt","button.mlb-reset.secure-activity-footer-bt",305244055),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (){
return oc.web.actions.user.show_login(new cljs.core.Keyword(null,"login-with-email","login-with-email",-1597480700));
})], null),"Log in required to access all posts"], null):new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"a.sent-via-carrot","a.sent-via-carrot",1466865001),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"href","href",-793805698),oc.web.urls.home], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.sent-via-carrot-copy","div.sent-via-carrot-copy",-1519772546),"Sent with Wut"], null)], null));
return cljs.core.apply.cljs$core$IFn$_invoke$arity$4(React.createElement,"div",((cljs.core.map_QMARK_(attrs46941))?sablono.interpreter.attributes(sablono.normalize.merge_with_class.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, ["secure-activity-footer"], null)], null),attrs46941], 0))):({"className": "secure-activity-footer"})),((cljs.core.map_QMARK_(attrs46941))?null:new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [sablono.interpreter.interpret(attrs46941)], null)));
})(),sablono.interpreter.interpret((cljs.core.truth_(activity_data)?null:new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.secure-activity-container","div.secure-activity-container",-1676186836),(function (){var G__46965 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"loading","loading",-737050189),true], null);
return (oc.web.components.ui.loading.loading.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.ui.loading.loading.cljs$core$IFn$_invoke$arity$1(G__46965) : oc.web.components.ui.loading.loading.call(null,G__46965));
})()], null)))], null):new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [sablono.interpreter.interpret(attrs46940),sablono.interpreter.interpret((cljs.core.truth_(is_showing_alert)?(oc.web.components.ui.alert_modal.alert_modal.cljs$core$IFn$_invoke$arity$0 ? oc.web.components.ui.alert_modal.alert_modal.cljs$core$IFn$_invoke$arity$0() : oc.web.components.ui.alert_modal.alert_modal.call(null)):null)),sablono.interpreter.interpret((cljs.core.truth_(activity_data)?new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-header.group","div.activity-header.group",-205610764),(function (){var G__46966 = org_data;
var G__46967 = activity_link;
var G__46968 = ((is_mobile_QMARK_)?new cljs.core.Keyword(null,"never","never",50472977):new cljs.core.Keyword(null,"always","always",-1772028770));
return (oc.web.components.ui.org_avatar.org_avatar.cljs$core$IFn$_invoke$arity$3 ? oc.web.components.ui.org_avatar.org_avatar.cljs$core$IFn$_invoke$arity$3(G__46966,G__46967,G__46968) : oc.web.components.ui.org_avatar.org_avatar.call(null,G__46966,G__46967,G__46968));
})(),(cljs.core.truth_(id_token)?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-header-right","div.activity-header-right",-1342000555),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button.mlb-reset.login-as-bt","button.mlb-reset.login-as-bt",1908941286),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (){
return oc.web.actions.user.show_login(new cljs.core.Keyword(null,"login-with-email","login-with-email",-1597480700));
}),new cljs.core.Keyword(null,"data-toggle","data-toggle",436966687),((is_mobile_QMARK_)?null:"tooltip"),new cljs.core.Keyword(null,"data-placement","data-placement",166529525),"bottom",new cljs.core.Keyword(null,"data-container","data-container",1473653353),"body",new cljs.core.Keyword(null,"title","title",636505583),"Log in to view all posts"], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.login-as","span.login-as",1254255139),"Log in as ",new cljs.core.Keyword(null,"first-name","first-name",-1559982131).cljs$core$IFn$_invoke$arity$1(id_token)], null),(oc.web.components.ui.user_avatar.user_avatar_image.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.ui.user_avatar.user_avatar_image.cljs$core$IFn$_invoke$arity$1(id_token) : oc.web.components.ui.user_avatar.user_avatar_image.call(null,id_token))], null)], null):new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-header-right","div.activity-header-right",-1342000555),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button.mlb-reset.learn-more-bt","button.mlb-reset.learn-more-bt",-492149483),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (){
return oc.web.router.redirect_BANG_(oc.web.urls.home);
})], null),["learn more",((is_mobile_QMARK_)?null:" about Wut")].join('')], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.or","span.or",1197649752)," or "], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button.mlb-reset.login-bt","button.mlb-reset.login-bt",-1454140625),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (){
return oc.web.actions.user.show_login(new cljs.core.Keyword(null,"login-with-email","login-with-email",-1597480700));
})], null),"Login"], null)], null))], null):null)),sablono.interpreter.interpret((cljs.core.truth_(activity_data)?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-content-outer","div.activity-content-outer",1781845432),new cljs.core.PersistentVector(null, 10, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-content","div.activity-content",1941335061),(cljs.core.truth_(new cljs.core.Keyword(null,"headline","headline",-157157727).cljs$core$IFn$_invoke$arity$1(activity_data))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-title","div.activity-title",1089138646),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"dangerouslySetInnerHTML","dangerouslySetInnerHTML",-554971138),oc.web.lib.utils.emojify(new cljs.core.Keyword(null,"headline","headline",-157157727).cljs$core$IFn$_invoke$arity$1(activity_data)),new cljs.core.Keyword(null,"class","class",-2030961996),oc.web.lib.utils.hide_class], null)], null):null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-content-author","div.activity-content-author",1708842702),(function (){var G__46973 = new cljs.core.Keyword(null,"publisher","publisher",-153364540).cljs$core$IFn$_invoke$arity$1(activity_data);
return (oc.web.components.ui.user_avatar.user_avatar_image.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.ui.user_avatar.user_avatar_image.cljs$core$IFn$_invoke$arity$1(G__46973) : oc.web.components.ui.user_avatar.user_avatar_image.call(null,G__46973));
})(),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.name","div.name",1027675228),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),oc.web.lib.utils.hide_class], null),[cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"name","name",1843675177).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"publisher","publisher",-153364540).cljs$core$IFn$_invoke$arity$1(activity_data)))," in ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"board-name","board-name",-677515056).cljs$core$IFn$_invoke$arity$1(activity_data))," on "].join(''),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"time","time",1385887882),new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,"date-time","date-time",177938180),new cljs.core.Keyword(null,"published-at","published-at",249684621).cljs$core$IFn$_invoke$arity$1(activity_data),new cljs.core.Keyword(null,"data-toggle","data-toggle",436966687),((is_mobile_QMARK_)?null:"tooltip"),new cljs.core.Keyword(null,"data-placement","data-placement",166529525),"top",new cljs.core.Keyword(null,"data-container","data-container",1473653353),"body",new cljs.core.Keyword(null,"data-delay","data-delay",1974747786),"{\"show\":\"1000\", \"hide\":\"0\"}",new cljs.core.Keyword(null,"data-title","data-title",-83549535),oc.web.lib.utils.activity_date_tooltip(activity_data)], null),oc.web.lib.utils.date_string.cljs$core$IFn$_invoke$arity$variadic(oc.web.lib.utils.js_date.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"published-at","published-at",249684621).cljs$core$IFn$_invoke$arity$1(activity_data)], 0)),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"year","year",335913393)], null)], 0))], null)], null)], null),(cljs.core.truth_(new cljs.core.Keyword(null,"body","body",-2049205669).cljs$core$IFn$_invoke$arity$1(activity_data))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-body.oc-mentions.oc-mentions-hover","div.activity-body.oc-mentions.oc-mentions-hover",579188809),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"dangerouslySetInnerHTML","dangerouslySetInnerHTML",-554971138),oc.web.lib.utils.emojify(new cljs.core.Keyword(null,"body","body",-2049205669).cljs$core$IFn$_invoke$arity$1(activity_data)),new cljs.core.Keyword(null,"class","class",-2030961996),oc.web.lib.utils.hide_class], null)], null):null),((cljs.core.seq(new cljs.core.Keyword(null,"polls","polls",-580623582).cljs$core$IFn$_invoke$arity$1(activity_data)))?(function (){var G__46974 = new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"polls-data","polls-data",-975205110),new cljs.core.Keyword(null,"polls","polls",-580623582).cljs$core$IFn$_invoke$arity$1(activity_data),new cljs.core.Keyword(null,"container-selector","container-selector",6506114),"div.secure-activity-container"], null);
return (oc.web.components.ui.poll.polls_wrapper.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.ui.poll.polls_wrapper.cljs$core$IFn$_invoke$arity$1(G__46974) : oc.web.components.ui.poll.polls_wrapper.call(null,G__46974));
})():null),(function (){var G__46975 = new cljs.core.Keyword(null,"attachments","attachments",-1535547830).cljs$core$IFn$_invoke$arity$1(activity_data);
return (oc.web.components.ui.stream_attachments.stream_attachments.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.ui.stream_attachments.stream_attachments.cljs$core$IFn$_invoke$arity$1(G__46975) : oc.web.components.ui.stream_attachments.stream_attachments.call(null,G__46975));
})(),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.activity-content-footer.group","div.activity-content-footer.group",-190222293),(function (){var G__46976 = new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"activity-data","activity-data",1293689136),activity_data,new cljs.core.Keyword(null,"comments-data","comments-data",1871210833),comments_drv,new cljs.core.Keyword(null,"current-activity-id","current-activity-id",-930108529),new cljs.core.Keyword(null,"uuid","uuid",-2145095719).cljs$core$IFn$_invoke$arity$1(activity_data)], null);
return (oc.web.components.ui.comments_summary.comments_summary.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.ui.comments_summary.comments_summary.cljs$core$IFn$_invoke$arity$1(G__46976) : oc.web.components.ui.comments_summary.comments_summary.call(null,G__46976));
})(),(function (){var G__46977 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"entity-data","entity-data",1608056141),activity_data], null);
return (oc.web.components.reactions.reactions.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.reactions.reactions.cljs$core$IFn$_invoke$arity$1(G__46977) : oc.web.components.reactions.reactions.call(null,G__46977));
})()], null),(cljs.core.truth_((function (){var or__4126__auto__ = (cljs.core.count(comments_data) > (0));
if(or__4126__auto__){
return or__4126__auto__;
} else {
return new cljs.core.Keyword(null,"can-comment","can-comment",718623455).cljs$core$IFn$_invoke$arity$1(activity_data);
}
})())?new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.comments-separator","div.comments-separator",876021438)], null):null),(cljs.core.truth_(new cljs.core.Keyword(null,"can-comment","can-comment",718623455).cljs$core$IFn$_invoke$arity$1(activity_data))?rum.core.with_key((function (){var G__46978 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"activity-data","activity-data",1293689136),activity_data], null);
return (oc.web.components.ui.add_comment.add_comment.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.ui.add_comment.add_comment.cljs$core$IFn$_invoke$arity$1(G__46978) : oc.web.components.ui.add_comment.add_comment.call(null,G__46978));
})(),["add-comment-",cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"uuid","uuid",-2145095719).cljs$core$IFn$_invoke$arity$1(activity_data))].join('')):null),(cljs.core.truth_(comments_data)?(function (){var G__46979 = new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"activity-data","activity-data",1293689136),activity_data,new cljs.core.Keyword(null,"comments-data","comments-data",1871210833),comments_data,new cljs.core.Keyword(null,"reply-add-comment-prefix","reply-add-comment-prefix",1123094795),"secure-activity",new cljs.core.Keyword(null,"current-user-id","current-user-id",-2013633451),new cljs.core.Keyword(null,"user-id","user-id",-206822291).cljs$core$IFn$_invoke$arity$1(id_token)], null);
return (oc.web.components.stream_comments.stream_comments.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.stream_comments.stream_comments.cljs$core$IFn$_invoke$arity$1(G__46979) : oc.web.components.stream_comments.stream_comments.call(null,G__46979));
})():null)], null)], null):null)),(function (){var attrs46943 = (cljs.core.truth_(id_token)?new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button.mlb-reset.secure-activity-footer-bt","button.mlb-reset.secure-activity-footer-bt",305244055),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (){
return oc.web.actions.user.show_login(new cljs.core.Keyword(null,"login-with-email","login-with-email",-1597480700));
})], null),"Log in required to access all posts"], null):new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"a.sent-via-carrot","a.sent-via-carrot",1466865001),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"href","href",-793805698),oc.web.urls.home], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.sent-via-carrot-copy","div.sent-via-carrot-copy",-1519772546),"Sent with Wut"], null)], null));
return cljs.core.apply.cljs$core$IFn$_invoke$arity$4(React.createElement,"div",((cljs.core.map_QMARK_(attrs46943))?sablono.interpreter.attributes(sablono.normalize.merge_with_class.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, ["secure-activity-footer"], null)], null),attrs46943], 0))):({"className": "secure-activity-footer"})),((cljs.core.map_QMARK_(attrs46943))?null:new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [sablono.interpreter.interpret(attrs46943)], null)));
})(),sablono.interpreter.interpret((cljs.core.truth_(activity_data)?null:new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.secure-activity-container","div.secure-activity-container",-1676186836),(function (){var G__46982 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"loading","loading",-737050189),true], null);
return (oc.web.components.ui.loading.loading.cljs$core$IFn$_invoke$arity$1 ? oc.web.components.ui.loading.loading.cljs$core$IFn$_invoke$arity$1(G__46982) : oc.web.components.ui.loading.loading.call(null,G__46982));
})()], null)))], null)));
}),new cljs.core.PersistentVector(null, 7, 5, cljs.core.PersistentVector.EMPTY_NODE, [rum.core.reactive,org.martinklepsch.derivatives.drv.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"secure-activity-data","secure-activity-data",223405040)], 0)),org.martinklepsch.derivatives.drv.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"id-token","id-token",-339268306)], 0)),org.martinklepsch.derivatives.drv.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"comments-data","comments-data",1871210833)], 0)),oc.web.mixins.mention.oc_mentions_hover(),oc.web.mixins.ui.refresh_tooltips_mixin,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"did-mount","did-mount",918232960),(function (s){
oc.web.components.secure_activity.maybe_load_comments(s);

return s;
}),new cljs.core.Keyword(null,"will-update","will-update",328062998),(function (s){
oc.web.components.secure_activity.maybe_load_comments(s);

return s;
}),new cljs.core.Keyword(null,"after-render","after-render",1997533433),(function (s){
oc.web.lib.utils.after((2000),(function (){
return oc.web.actions.activity.send_secure_item_seen_read();
}));

return s;
})], null)], null),"secure-activity");

//# sourceMappingURL=oc.web.components.secure_activity.js.map
