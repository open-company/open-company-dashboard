shadow$provide.module$node_modules$$sentry$hub$dist$hub=function(global,require,module,exports){function getMainCarrier(){var carrier=utils_1.getGlobalObject();carrier.__SENTRY__=carrier.__SENTRY__||{extensions:{},hub:void 0};return carrier}function makeMain(hub){var registry=getMainCarrier(),oldHub=getHubFromCarrier(registry);setHubOnCarrier(registry,hub);return oldHub}function getHubFromActiveDomain(registry){try{var sentry=getMainCarrier().__SENTRY__;if(!sentry||!sentry.extensions||!sentry.extensions.domain)return getHubFromCarrier(registry);
var activeDomain=sentry.extensions.domain.active;if(!activeDomain)return getHubFromCarrier(registry);if(!(activeDomain&&activeDomain.__SENTRY__&&activeDomain.__SENTRY__.hub)||getHubFromCarrier(activeDomain).isOlderThan(exports.API_VERSION)){var registryHubTopStack=getHubFromCarrier(registry).getStackTop();setHubOnCarrier(activeDomain,new Hub(registryHubTopStack.client,scope_1.Scope.clone(registryHubTopStack.scope)))}return getHubFromCarrier(activeDomain)}catch(_Oo){return getHubFromCarrier(registry)}}
function getHubFromCarrier(carrier){if(carrier&&carrier.__SENTRY__&&carrier.__SENTRY__.hub)return carrier.__SENTRY__.hub;carrier.__SENTRY__=carrier.__SENTRY__||{};carrier.__SENTRY__.hub=new Hub;return carrier.__SENTRY__.hub}function setHubOnCarrier(carrier,hub){if(!carrier)return!1;carrier.__SENTRY__=carrier.__SENTRY__||{};carrier.__SENTRY__.hub=hub;return!0}Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("module$node_modules$tslib$tslib"),utils_1=require("module$node_modules$$sentry$utils$dist$index"),
scope_1=require("module$node_modules$$sentry$hub$dist$scope");exports.API_VERSION=3;var Hub=function(){function Hub(client,scope,_version){void 0===scope&&(scope=new scope_1.Scope);void 0===_version&&(_version=exports.API_VERSION);this._version=_version;this._stack=[];this._stack.push({client:client,scope:scope});this.bindClient(client)}Hub.prototype.isOlderThan=function(version){return this._version<version};Hub.prototype.bindClient=function(client){(this.getStackTop().client=client)&&client.setupIntegrations&&
client.setupIntegrations()};Hub.prototype.pushScope=function(){var stack=this.getStack();stack=scope_1.Scope.clone(0<stack.length?stack[stack.length-1].scope:void 0);this.getStack().push({client:this.getClient(),scope:stack});return stack};Hub.prototype.popScope=function(){return void 0!==this.getStack().pop()};Hub.prototype.withScope=function(callback){var scope=this.pushScope();try{callback(scope)}finally{this.popScope()}};Hub.prototype.getClient=function(){return this.getStackTop().client};Hub.prototype.getScope=
function(){return this.getStackTop().scope};Hub.prototype.getStack=function(){return this._stack};Hub.prototype.getStackTop=function(){return this._stack[this._stack.length-1]};Hub.prototype.captureException=function(exception,hint){var eventId=this._lastEventId=utils_1.uuid4(),finalHint=hint;if(!hint){try{throw Error("Sentry syntheticException");}catch(exception$1){hint=exception$1}finalHint={originalException:exception,syntheticException:hint}}this._invokeClient("captureException",exception,tslib_1.__assign(tslib_1.__assign({},
finalHint),{event_id:eventId}));return eventId};Hub.prototype.captureMessage=function(message,level,hint){var eventId=this._lastEventId=utils_1.uuid4(),finalHint=hint;if(!hint){try{throw Error(message);}catch(exception){hint=exception}finalHint={originalException:message,syntheticException:hint}}this._invokeClient("captureMessage",message,level,tslib_1.__assign(tslib_1.__assign({},finalHint),{event_id:eventId}));return eventId};Hub.prototype.captureEvent=function(event,hint){var eventId=this._lastEventId=
utils_1.uuid4();this._invokeClient("captureEvent",event,tslib_1.__assign(tslib_1.__assign({},hint),{event_id:eventId}));return eventId};Hub.prototype.lastEventId=function(){return this._lastEventId};Hub.prototype.addBreadcrumb=function(breadcrumb,hint){var top=this.getStackTop();if(top.scope&&top.client){var _a=top.client.getOptions&&top.client.getOptions()||{},_b=_a.beforeBreadcrumb,beforeBreadcrumb=void 0===_b?null:_b;_a=_a.maxBreadcrumbs;_a=void 0===_a?100:_a;if(!(0>=_a)){_b=utils_1.timestampWithMs();
var mergedBreadcrumb=tslib_1.__assign({timestamp:_b},breadcrumb);breadcrumb=beforeBreadcrumb?utils_1.consoleSandbox(function(){return beforeBreadcrumb(mergedBreadcrumb,hint)}):mergedBreadcrumb;null!==breadcrumb&&top.scope.addBreadcrumb(breadcrumb,Math.min(_a,100))}}};Hub.prototype.setUser=function(user){var top=this.getStackTop();top.scope&&top.scope.setUser(user)};Hub.prototype.setTags=function(tags){var top=this.getStackTop();top.scope&&top.scope.setTags(tags)};Hub.prototype.setExtras=function(extras){var top=
this.getStackTop();top.scope&&top.scope.setExtras(extras)};Hub.prototype.setTag=function(key,value){var top=this.getStackTop();top.scope&&top.scope.setTag(key,value)};Hub.prototype.setExtra=function(key,extra){var top=this.getStackTop();top.scope&&top.scope.setExtra(key,extra)};Hub.prototype.setContext=function(name,context){var top=this.getStackTop();top.scope&&top.scope.setContext(name,context)};Hub.prototype.configureScope=function(callback){var top=this.getStackTop();top.scope&&top.client&&callback(top.scope)};
Hub.prototype.run=function(callback){var oldHub=makeMain(this);try{callback(this)}finally{makeMain(oldHub)}};Hub.prototype.getIntegration=function(integration){var client=this.getClient();if(!client)return null;try{return client.getIntegration(integration)}catch(_oO){return utils_1.logger.warn("Cannot retrieve integration "+integration.id+" from the current Hub"),null}};Hub.prototype.startSpan=function(context){return this._callExtensionMethod("startSpan",context)};Hub.prototype.startTransaction=
function(context){return this._callExtensionMethod("startTransaction",context)};Hub.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")};Hub.prototype._invokeClient=function(method){for(var _a,args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];(_i=this.getStackTop())&&_i.client&&_i.client[method]&&(_a=_i.client)[method].apply(_a,tslib_1.__spread(args,[_i.scope]))};Hub.prototype._callExtensionMethod=function(method){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-
1]=arguments[_i];if((_i=getMainCarrier().__SENTRY__)&&_i.extensions&&"function"===typeof _i.extensions[method])return _i.extensions[method].apply(this,args);utils_1.logger.warn("Extension method "+method+" couldn't be found, doing nothing.")};return Hub}();exports.Hub=Hub;exports.getMainCarrier=getMainCarrier;exports.makeMain=makeMain;exports.getCurrentHub=function(){var registry=getMainCarrier();registry&&registry.__SENTRY__&&registry.__SENTRY__.hub&&!getHubFromCarrier(registry).isOlderThan(exports.API_VERSION)||
setHubOnCarrier(registry,new Hub);return utils_1.isNodeEnv()?getHubFromActiveDomain(registry):getHubFromCarrier(registry)};exports.getHubFromCarrier=getHubFromCarrier;exports.setHubOnCarrier=setHubOnCarrier}
//# sourceMappingURL=module$node_modules$$sentry$hub$dist$hub.js.map
