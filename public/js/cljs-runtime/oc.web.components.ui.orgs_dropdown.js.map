{"version":3,"sources":["oc/web/components/ui/orgs_dropdown.cljs"],"mappings":"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","names":["rum.core/build-defc","js/React.createElement","sablono.util/join-classes","sablono.interpreter/interpret","oc.web.components.ui.orgs-dropdown/org-dropdown-item","rum.core/static","current-slug","org","is-mobile?","cljs.core._EQ_","oc.web.urls.default_landing","e","oc.web.lib.utils/event-stop","oc.web.actions.routing/switch-org-dashboard","oc.web.components.ui.org-avatar/org-avatar","rum.core/build-defcs","oc.web.components.ui.orgs-dropdown/orgs-dropdown","rum.core/reactive","org.martinklepsch.derivatives.drv","oc.web.mixins.ui.on_click_out","s","cljs.core/deref","org.martinklepsch.derivatives/get-ref","oc.web.dispatcher/dispatch!","orgs","org.martinklepsch.derivatives/react","org-data","current-org-slug","should-show-dropdown?","cljs.core/count","orgs-dropdown-visible","oc.web.lib.responsive/is-tablet-or-mobile?","oc.web.lib.utils/class-set","cljs.core/seq","cljs.core/not","G__45858","G__45859","G__45860","iter__4529__auto__","s__45862","cljs.core/LazySeq","temp__5735__auto__","cljs.core/chunked-seq?","c__4527__auto__","size__4528__auto__","b__45864","cljs.core/chunk-buffer","i__45863","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__45861","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","rum.core/with-key","cljs.core/chunk-first"],"sourcesContent":["(ns oc.web.components.ui.orgs-dropdown\n  (:require [rum.core :as rum]\n            [org.martinklepsch.derivatives :as drv]\n            [oc.web.urls :as oc-urls]\n            [oc.web.router :as router]\n            [oc.web.dispatcher :as dis]\n            [oc.web.lib.utils :as utils]\n            [oc.web.lib.responsive :as responsive]\n            [oc.web.mixins.ui :refer (on-click-out)]\n            [oc.web.actions.routing :as routing-actions]\n            [oc.web.components.ui.org-avatar :refer (org-avatar)]))\n\n(rum/defc org-dropdown-item < rum/static\n  [current-slug org is-mobile?]\n  [:li\n    {:class (when (= (:slug org) current-slug) \"active\")}\n    [:a\n      {:href (oc-urls/default-landing (:slug org))\n       :on-click (fn [e]\n                   (utils/event-stop e)\n                   (routing-actions/switch-org-dashboard org))}\n      (org-avatar org false :always)]])\n\n(rum/defcs orgs-dropdown < rum/static\n                           rum/reactive\n                           (drv/drv :orgs)\n                           (drv/drv :org-data)\n                           (drv/drv :orgs-dropdown-visible)\n                           (on-click-out (fn [s e]\n                            (when @(drv/get-ref s :orgs-dropdown-visible)\n                              (dis/dispatch! [:input [:orgs-dropdown-visible] false]))))\n  [s]\n  (let [orgs (drv/react s :orgs)\n        org-data (drv/react s :org-data)\n        current-org-slug (:slug org-data)\n        should-show-dropdown? (> (count orgs) 1)\n        orgs-dropdown-visible (drv/react s :orgs-dropdown-visible)\n        is-mobile? (responsive/is-tablet-or-mobile?)]\n    [:div.orgs-dropdown\n      {:class (utils/class-set {:dropdown should-show-dropdown?\n                                :org-has-logo (seq (:logo-url org-data))})}\n      [:button.orgs-dropdown-btn\n        {:id \"orgs-dropdown\"\n         :class (utils/class-set {:dropdown-toggle should-show-dropdown?\n                                  :show-dropdown-caret orgs-dropdown-visible})\n         :on-click (fn [e]\n                     (utils/event-stop e)\n                     (when should-show-dropdown?\n                       (dis/dispatch! [:input [:orgs-dropdown-visible] (not orgs-dropdown-visible)])))}\n        (org-avatar org-data (not should-show-dropdown?) :always)]\n      (when orgs-dropdown-visible\n        [:div.orgs-dropdown-container\n          [:div.triangle]\n          [:ul.orgs-dropdown-menu\n            (for [org orgs]\n              (rum/with-key\n               (org-dropdown-item current-org-slug org is-mobile?)\n               (str \"org-dropdown-\" (:slug org))))]])]))"]}